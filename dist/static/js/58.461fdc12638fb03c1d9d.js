webpackJsonp([58],{"0osc":function(t,e,n){var a=n("n8mI");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("29a369ae",a,!0,{})},RjxY:function(t,e,n){"use strict";function a(t){n("0osc")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("bWJ8"),o=n("qqG0"),l={name:"PlaceTimeTable",components:{Button:i.a,Toast:o.a},data:function(){return{isToast:!1,toast:"",allNum:0,currentPage:1,pageItem:20,yearid:"",yearData:[],tableListData:[],weekData:[{week:"1",title:"周一"},{week:"2",title:"周二"},{week:"3",title:"周三"},{week:"4",title:"周四"},{week:"5",title:"周五"},{week:"6",title:"周六"},{week:"7",title:"周日"}],selectWeek:5,selectWeekData:[{id:5,name:"周一~周五"},{id:7,name:"周一~周日"}],isShowTeacher:!!sessionStorage.getItem("showTeacherClassroom"),tableLoading:!1,checkedKeys:[],filterText:"",treeData:[{id:1e3,pid:101,label:"烟台一中",group:102,isLeaf:0,isSystem:0,children:[{id:1e4,pid:1e3,label:"初中校区",group:103,isLeaf:0,isSystem:1,children:[{id:10010,pid:1e4,label:"校门口",group:104,isLeaf:1,isSystem:1,children:[]},{id:10011,pid:1e4,label:"传达室",group:104,isLeaf:1,isSystem:1,children:[]},{id:10012,pid:1e4,label:"教学楼",group:104,isLeaf:1,isSystem:1,children:[]}]},{id:10001,pid:1e3,label:"高中校区",group:103,isLeaf:0,isSystem:0,children:[{id:10020,pid:10001,label:"校门口",group:104,isLeaf:1,isSystem:0,children:[]},{id:10021,pid:10001,label:"传达室",group:104,isLeaf:1,isSystem:0,children:[]},{id:10022,pid:10001,label:"教学楼",group:104,isLeaf:1,isSystem:0,children:[]}]}]}]}},methods:{resizeLayout:function(){setTimeout(function(){var t=$(".index > .m-cen").height(),e=$(".place-timetable .common-top").height(),n=$(".place-timetable .right-top").height(),a=$(".place-timetable .pagination-box").height(),i=t-e-20;$(".place-timetable .content-box").height(i),$(".place-timetable .el-tree").height(i-n-30),$(".place-timetable .right-content").height(i-n-a)},50)},renderProductId:function(t,e){e.column;return t("div",[t("dd","节次"),t("dd","星期")])},filterNode:function(t,e){return!t||(-1!==String(e.id).indexOf(t)||-1!==e.label.indexOf(t))},getCheckedKeys:function(){this.checkedKeys=[];for(var t=this.$refs.tree.getCheckedNodes(!0),e=0;e<t.length;e++){var n=(this.$refs.tree.getNode(t[e]),{});n.id=t[e].id,n.name=this.$refs.tree.getNode(t[e]).label,this.checkedKeys.push(n)}this.currentPage=1,this.getTableList()},getTeachingList:function(){var t=this,e={schoolid:localStorage.getItem("schoolId")};this.$api.EducationManage.getTeachingList("get",e).then(function(e){600==e.data.code||0==e.data.code?(t.yearData=e.data.data,t.yearData.length>0&&(t.yearid=t.yearData[0].id),t.getTableList()):(t.isToast=!0,t.toast=e.data.msg)})},changeYear:function(t){this.currentPage=1,this.getTableList()},getTableList:function(){var t=this,e={classroom:[{id:54,name:"第一教室"}],semester_id:1,week_length:this.selectWeek,page_index:this.currentPage,page_size:this.pageItem,school_id:localStorage.getItem("schoolId")};this.$api.DataCount.getTimetablesClass("post",e).then(function(e){if(600==e.data.code||0==e.data.code){t.allNum=e.data.data.count;for(var n=e.data.data.data,a=0;a<n.length;a++)for(var i=0;i<n[a].detail.length;i++)for(var o=0;o<n[a].detail[i].detail.length;o++)for(var l=0;l<7;l++)n[a].detail[i].detail[o].detail[l]||(n[a].detail[i].detail[o].detail[l]={});t.tableListData=n}else t.isToast=!0,t.toast=e.data.msg})},changeWeek:function(t){this.getTableList()},showTeacher:function(t){t?sessionStorage.setItem("showTeacherClassroom",1):sessionStorage.removeItem("showTeacherClassroom")},handleCurrentChange:function(t){this.currentPage=t,this.getTableList()}},mounted:function(){this.roleActions=this.$store.state.Common.roleActions,this.resizeLayout()},created:function(){this.getTableList()}},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"place-timetable"},[n("div",{staticClass:"common-top"},[t._m(0),t._v(" "),n("el-select",{staticStyle:{width:"270px"},attrs:{placeholder:"请选择学年",size:"medium"},on:{change:t.changeYear},model:{value:t.yearid,callback:function(e){t.yearid=e},expression:"yearid"}},t._l(t.yearData,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),n("div",{staticClass:"content-box"},[n("div",{staticClass:"m-left"},[n("h4",[t._v("选择班级")]),t._v(" "),n("div",{staticClass:"inner"},[n("el-tree",{ref:"tree",attrs:{data:t.treeData,"node-key":"id","show-checkbox":"","default-expand-all":"","check-on-click-node":!1,"filter-node-method":t.filterNode},on:{check:t.getCheckedKeys},scopedSlots:t._u([{key:"default",fn:function(e){var a=(e.node,e.data);return n("span",{ref:a.id,staticClass:"span",attrs:{title:"工号："+a.id}},[t._v("\n                            "+t._s(a.label)+"\n                        ")])}}])})],1)]),t._v(" "),n("div",{staticClass:"m-right"},[n("div",{staticClass:"right-top"},[n("span",{staticClass:"show-options"},[t._v("显示选项：")]),t._v(" "),n("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"请选择范围",size:"medium"},on:{change:t.changeWeek},model:{value:t.selectWeek,callback:function(e){t.selectWeek=e},expression:"selectWeek"}},t._l(t.selectWeekData,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),n("el-checkbox",{on:{change:t.showTeacher},model:{value:t.isShowTeacher,callback:function(e){t.isShowTeacher=e},expression:"isShowTeacher"}},[t._v("显示任课教师")]),t._v(" "),n("Button",{attrs:{title:"导出",btnClass:"custom6",btnFontSize:"12px"},on:{click:function(t){}}}),t._v(" "),n("Button",{attrs:{title:"打印",btnClass:"custom8",btnFontSize:"12px"}})],1),t._v(" "),n("div",{staticClass:"right-content"},t._l(t.tableListData,function(e,a){return t.tableListData.length>0?n("div",{key:a,staticClass:"table-list"},t._l(e.detail,function(a,i){return n("div",{key:i,staticClass:"empty-box"},[n("h5",[t._v("班级教室："+t._s(e.classroom_name)+"课表"),n("span",[t._v("(此课表适用时间："+t._s(a.dateRange)+"）")])]),t._v(" "),n("div",{staticClass:"table-box"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"multipleTable",refInFor:!0,staticStyle:{width:"100%"},attrs:{id:"table",height:"100%",border:"",align:"center",data:a.detail,"tooltip-effect":"dark","highlight-current-row":""}},[n("el-table-column",{attrs:{"show-overflow-tooltip":"",width:"160",prop:"","render-header":t.renderProductId},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.detail.length>0?n("dd",[t._v(t._s(e.row.detail[0].section_name))]):t._e(),t._v(" "),e.row.detail.length>0?n("dd",[t._v(t._s(e.row.timeRange))]):t._e()]}}])}),t._v(" "),t._l(t.weekData,function(e,a){return n("el-table-column",{key:a,attrs:{prop:e.week,"min-width":"100",label:e.title,"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("dd",[t._v(t._s(e.row.detail[a].subject_name))]),t._v(" "),t.isShowTeacher&&null!=e.row.detail[a].subject_teacher?n("dd",{staticClass:"teacher-name"},[t._v(t._s(e.row.detail[a].subject_teacher?e.row.detail[a].subject_teacher:"未找到任课教师"))]):t._e(),t._v(" "),t.isShowTeacher&&null==e.row.detail[a].subject_teacher?n("dd"):t._e()]}}])})})],2)],1)])}),0):t._e()}),0),t._v(" "),n("div",{staticClass:"pagination-box"},[n("el-pagination",{attrs:{background:"",layout:" prev, pager, next",total:t.allNum,"page-size":t.pageItem,"current-page":t.currentPage},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleCurrentChange}})],1)])])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"left-title"},[t._v("排课周期："),n("i")])}],c={render:r,staticRenderFns:s},d=c,h=n("VU/8"),b=a,p=h(l,d,!1,b,"data-v-19714b85",null);e.default=p.exports},n8mI:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"\n.place-timetable[data-v-19714b85] {\n  width: 100%;\n  height: 100%;\n}\n.place-timetable .common-top[data-v-19714b85] {\n    width: 100%;\n    height: 50px;\n    line-height: 50px;\n    background-color: #fff;\n    margin-bottom: 20px;\n}\n.place-timetable .common-top .left-title[data-v-19714b85] {\n      margin-left: 0;\n      margin-right: 40px;\n      width: 85px;\n      height: 50px;\n      overflow: hidden;\n      padding-left: 35px;\n      font-size: 12px;\n      color: #636363;\n}\n.place-timetable .content-box[data-v-19714b85] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.place-timetable .content-box .m-left[data-v-19714b85] {\n      -ms-flex-preferred-size: 270px;\n          flex-basis: 270px;\n      min-width: 270px;\n      text-align: center;\n      background-color: #fff;\n      font-size: 12px;\n      overflow: hidden;\n}\n.place-timetable .content-box .m-left h4[data-v-19714b85] {\n        width: 100%;\n        height: 60px;\n        line-height: 60px;\n        font-size: 18px;\n        font-weight: bold;\n        color: #666;\n        text-align: left;\n        padding-left: 30px;\n        border-bottom: 1px solid #e1e1e1;\n        border-right: 1px solid #e1e1e1;\n        background-color: #eff3f6;\n}\n.place-timetable .content-box .m-left .inner[data-v-19714b85] {\n        width: 100%;\n        height: 100%;\n        overflow: auto;\n        position: relative;\n        border-right: 1px solid #e1e1e1;\n}\n.place-timetable .content-box .m-left .inner .el-input[data-v-19714b85] {\n          width: 90%;\n          margin-top: 10px;\n          margin-bottom: 10px;\n}\n.place-timetable .content-box .m-left .inner .el-tree[data-v-19714b85] {\n          padding-left: 30px;\n          margin-top: 15px;\n          height: 100%;\n          overflow: auto;\n}\n.place-timetable .content-box .m-right[data-v-19714b85] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      min-width: 1px;\n}\n.place-timetable .content-box .m-right .right-top[data-v-19714b85] {\n        width: 100%;\n        height: 60px;\n        line-height: 60px;\n        background-color: #fff;\n        border-bottom: 1px solid #e1e1e1;\n}\n.place-timetable .content-box .m-right .right-top .show-options[data-v-19714b85] {\n          font-size: 14px;\n          color: #636363;\n          margin-left: 40px;\n          margin-right: 20px;\n}\n.place-timetable .content-box .m-right .right-top[data-v-19714b85] .el-checkbox {\n          margin-left: 36px;\n}\n.place-timetable .content-box .m-right .right-top[data-v-19714b85] .el-checkbox .el-checkbox__inner {\n            border-radius: 50% !important;\n}\n.place-timetable .content-box .m-right .right-top[data-v-19714b85] .el-checkbox .el-checkbox__label {\n            color: #333 !important;\n}\n.place-timetable .content-box .m-right .right-top .button-div[data-v-19714b85] {\n          float: right;\n          margin-right: 12px;\n          margin-top: 11px;\n}\n.place-timetable .content-box .m-right .right-top .button-div[data-v-19714b85]:nth-of-type(2) {\n            margin-right: 55px;\n}\n.place-timetable .content-box .m-right .right-content[data-v-19714b85] {\n        width: 100%;\n        height: 100%;\n        background-color: #fff;\n        padding-left: 40px;\n        padding-right: 70px;\n        overflow-y: auto;\n}\n.place-timetable .content-box .m-right .right-content .table-list[data-v-19714b85] {\n          width: 100%;\n}\n.place-timetable .content-box .m-right .right-content .table-list h5[data-v-19714b85] {\n            height: 70px;\n            line-height: 70px;\n            font-size: 18px;\n            color: #1cab7d;\n}\n.place-timetable .content-box .m-right .right-content .table-list h5 span[data-v-19714b85] {\n              font-size: 14px;\n              color: #666;\n              font-weight: normal;\n              margin-left: 20px;\n}\n.place-timetable .content-box .m-right .right-content .table-list[data-v-19714b85] .el-table {\n            font-size: 16px;\n            color: #333;\n}\n.place-timetable .content-box .m-right .right-content .table-list[data-v-19714b85] .el-table thead tr th {\n              height: 48px !important;\n              position: relative;\n}\n.place-timetable .content-box .m-right .right-content .table-list[data-v-19714b85] .el-table thead tr th:nth-of-type(1) .cell {\n                padding: 0;\n                width: 100%;\n                height: 100%;\n                position: relative;\n}\n.place-timetable .content-box .m-right .right-content .table-list[data-v-19714b85] .el-table thead tr th:nth-of-type(1) .cell::after {\n                  content: '';\n                  display: block;\n                  width: 180px;\n                  height: 1px;\n                  background: #e1e1e1;\n                  -webkit-transform: rotate(17deg);\n                  transform: rotate(17deg);\n                  position: absolute;\n                  top: 24px;\n                  left: -8px;\n}\n.place-timetable .content-box .m-right .right-content .table-list[data-v-19714b85] .el-table thead tr th:nth-of-type(1) .cell dd {\n                  display: inline-block;\n                  position: absolute;\n                  font-size: 15px;\n                  line-height: 15px;\n}\n.place-timetable .content-box .m-right .right-content .table-list[data-v-19714b85] .el-table thead tr th:nth-of-type(1) .cell dd:nth-of-type(1) {\n                    left: 25px;\n                    top: 28px;\n}\n.place-timetable .content-box .m-right .right-content .table-list[data-v-19714b85] .el-table thead tr th:nth-of-type(1) .cell dd:nth-of-type(2) {\n                    right: 25px;\n                    top: 10px;\n}\n.place-timetable .content-box .m-right .right-content .table-list[data-v-19714b85] .el-table .teacher-name {\n              color: #666;\n              font-size: 12px;\n}\n.place-timetable .content-box .m-right .right-content .table-list[data-v-19714b85] .el-table .no-teacher {\n              color: #ff4e4e;\n}\n.place-timetable .content-box .m-right .pagination-box[data-v-19714b85] {\n        width: 100%;\n        height: 60px;\n        background: #fff;\n        -webkit-box-sizing: content-box;\n                box-sizing: content-box;\n        border-top: 1px solid #e1e1e1;\n}\n.place-timetable .content-box .m-right .pagination-box .el-pagination[data-v-19714b85] {\n          padding-top: 15px;\n}\n",""])}});