webpackJsonp([57],{DWxy:function(e,a,t){a=e.exports=t("FZ+f")(!1),a.push([e.i,"\n.buildings-devices[data-v-1acf8c74] {\n  width: 100%;\n  height: 100%;\n  margin: 0 auto;\n}\n.buildings-devices .set-top[data-v-1acf8c74] {\n    height: 6.3vh;\n    background: #F5F7F8;\n}\n.buildings-devices .set-top[data-v-1acf8c74] .navmenu-container .navbar .nav-div {\n      text-align: center;\n      color: #c0c4cc;\n}\n.buildings-devices .set-top[data-v-1acf8c74] .navmenu-container .navbar .nav-div.actives {\n        color: #1cab7d;\n}\n.buildings-devices .set-top[data-v-1acf8c74] .navmenu-container .navbar .icon {\n      position: static;\n}\n.buildings-devices .set-bottom[data-v-1acf8c74] {\n    margin-top: 10px;\n}\n.buildings-devices .m-top[data-v-1acf8c74] {\n    width: 100%;\n    height: auto;\n    background: #fff;\n    margin-bottom: 15px;\n}\n.buildings-devices .m-top .content[data-v-1acf8c74] {\n      max-height: 100px;\n      min-height: 50px;\n      /*max-height: 11.5vh;*/\n      padding: 15px 2% 0;\n      position: relative;\n      overflow: auto;\n}\n.buildings-devices .m-top .content .groupBtn[data-v-1acf8c74] {\n        position: relative;\n        float: left;\n        display: inline-block;\n        margin-right: 10px;\n        margin-bottom: 15px;\n        z-index: 1;\n}\n.buildings-devices .m-top .content .groupBtn .el-button[data-v-1acf8c74]:hover {\n          color: #1b9a71;\n          border: 1px solid #1b9a71;\n}\n.buildings-devices .m-top .content .groupBtn .el-button[data-v-1acf8c74]:active {\n          color: #1b9a71;\n          border: 1px solid #1b9a71;\n}\n.buildings-devices .m-top .content .groupBtn img[data-v-1acf8c74] {\n          width: 15px;\n          height: 15px;\n          position: absolute;\n          right: -7px;\n          top: -7px;\n}\n.buildings-devices .m-top .content .shade-div[data-v-1acf8c74] {\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        right: 0;\n        top: 0;\n}\n.buildings-devices .m-top .content[data-v-1acf8c74] .el-input.act input {\n        background: #1cab7d;\n        color: #fff;\n}\n.buildings-devices .m-top .content[data-v-1acf8c74] .el-input.edit input {\n        background: transparent;\n        color: #333;\n}\n.buildings-devices .m-cen[data-v-1acf8c74] {\n    width: 100%;\n    height: auto;\n    background: #fff;\n}\n.buildings-devices .m-cen .title[data-v-1acf8c74] {\n      border-bottom: 1px solid #e1e1e1;\n}\n.buildings-devices .m-cen > .content[data-v-1acf8c74] {\n      height: 30vh;\n}\n.buildings-devices .m-cen > .content .el-table[data-v-1acf8c74] {\n        border-top: 0;\n        border-left: 0;\n}\n.buildings-devices .m-cen > .content[data-v-1acf8c74] .is-leaf:not(.is-center) {\n        padding: 0 10px;\n        /*width: 200px;*/\n}\n.buildings-devices .m-cen > .content[data-v-1acf8c74] .is-leaf:not(.is-center) .cell {\n          line-height: 35px;\n          border: 1px solid #e1e1e1;\n          background: #fff;\n          border-radius: 5px;\n}\n.buildings-devices .m-cen > .content[data-v-1acf8c74] .is-leaf:not(.is-center) .cell .el-table__column-filter-trigger {\n            float: right;\n}\n.buildings-devices .m-cen .aisle-dialog[data-v-1acf8c74] .el-dialog--center .el-dialog__body {\n      padding-bottom: 0;\n}\n.buildings-devices .m-cen .sch-system-dialog[data-v-1acf8c74] {\n      /*  .el-form-item{\n                  width:100%;\n                  text-align: left;\n                  position: relative;\n                  padding-left: 2%;\n                  padding-right: 3%;\n                  margin-bottom: 0!important;\n                  /deep/ .el-radio-group{\n                      .el-radio{\n                          display: inline-block;\n                      }\n                  }\n                  .el-table{\n                      width:800px;\n                  }\n              }*/\n}\n.buildings-devices .m-cen .sch-system-dialog[data-v-1acf8c74] .el-table thead th {\n        height: 35px;\n        font-size: 12px;\n}\n.buildings-devices .m-cen .sch-system-dialog .c-top[data-v-1acf8c74] {\n        padding-left: 50px;\n        position: relative;\n}\n.buildings-devices .m-cen .sch-system-dialog .c-top[data-v-1acf8c74]:before {\n          content: '';\n          position: absolute;\n          left: 25px;\n          width: 2px;\n          height: 75%;\n          margin: 50px 0;\n          border-left: 1px dashed #1cab7d;\n}\n.buildings-devices .m-cen .sch-system-dialog .c-top .ct-title[data-v-1acf8c74] {\n          position: relative;\n          margin-bottom: 10px;\n          line-height: 35px;\n}\n.buildings-devices .m-cen .sch-system-dialog .c-top .ct-title[data-v-1acf8c74]:before {\n            content: '1';\n            position: absolute;\n            left: -40px;\n            width: 30px;\n            height: 30px;\n            line-height: 30px;\n            text-align: center;\n            color: #1cab7d;\n            font-weight: bold;\n            border: 2px solid #1cab7d;\n            border-radius: 50%;\n}\n.buildings-devices .m-cen .sch-system-dialog .c-top .pagination-box[data-v-1acf8c74] {\n          border: 1px solid #EBEEF5;\n          border-top: 0;\n          height: 50px;\n}\n.buildings-devices .m-cen .sch-system-dialog .c-top .pagination-box > div[data-v-1acf8c74] {\n            padding-top: 10px;\n}\n.buildings-devices .m-cen .sch-system-dialog .c-bom[data-v-1acf8c74] {\n        padding-left: 50px;\n}\n.buildings-devices .m-cen .sch-system-dialog .c-bom .cb-title[data-v-1acf8c74] {\n          position: relative;\n          line-height: 35px;\n}\n.buildings-devices .m-cen .sch-system-dialog .c-bom .cb-title[data-v-1acf8c74]:before {\n            content: '2';\n            position: absolute;\n            left: -40px;\n            width: 30px;\n            height: 30px;\n            line-height: 30px;\n            text-align: center;\n            color: #1cab7d;\n            font-weight: bold;\n            border: 2px solid #1cab7d;\n            border-radius: 50%;\n}\n.buildings-devices .m-cen .sch-system-dialog .c-bom .cb-radio .el-radio + .el-radio[data-v-1acf8c74] {\n          margin-left: 0;\n}\n.buildings-devices .m-cen .sch-system-dialog .c-bom .cb-radio[data-v-1acf8c74] .el-radio {\n          margin-right: 15px;\n          line-height: 30px;\n          color: #333;\n}\n.buildings-devices .m-cen .sch-system-dialog .c-bom .cb-radio[data-v-1acf8c74] .el-radio .el-radio__inner:after {\n            width: 6px;\n            height: 6px;\n}\n.buildings-devices .m-cen .sch-system-dialog .content .dev-select-info[data-v-1acf8c74] {\n        display: inline-block;\n}\n.buildings-devices .m-cen .sch-system-dialog .content .dev-select-info span[data-v-1acf8c74] {\n          padding: 0 10px;\n}\n.buildings-devices .m-cen .sch-system-dialog .content .dev-select-info span[data-v-1acf8c74]:nth-of-type(1) {\n            padding-left: 0;\n}\n.buildings-devices .m-cen .sch-system-dialog .content[data-v-1acf8c74] .button-div button {\n        padding: 0 10px;\n}\n.buildings-devices .m-cen .sch-system-dialog .content2 .c-top[data-v-1acf8c74] {\n        padding-left: 0;\n}\n.buildings-devices .m-cen .sch-system-dialog .content2 .c-top .ct-title[data-v-1acf8c74]:before {\n          display: none;\n}\n.buildings-devices .m-cen .sch-system-dialog .content2 .c-top[data-v-1acf8c74]:before {\n          display: none;\n}\n.buildings-devices .m-cen .sch-system-dialog[data-v-1acf8c74] .el-dialog__header .dialog-title {\n        width: 70%;\n        display: inline-block;\n}\n.buildings-devices .m-cen .sch-system-dialog[data-v-1acf8c74] .el-dialog__header .dialog-title li {\n          color: #BABABA;\n          font-weight: bold;\n          font-size: 20px;\n          width: 50%;\n          float: left;\n}\n.buildings-devices .m-cen .sch-system-dialog[data-v-1acf8c74] .el-dialog__header .dialog-title li span {\n            padding: 5px;\n            cursor: pointer;\n}\n.buildings-devices .m-cen .sch-system-dialog[data-v-1acf8c74] .el-dialog__header .dialog-title li.act-li span {\n            color: #1cab7d;\n            border-bottom: 3px solid #1cab7d;\n}\n.buildings-devices .m-cen .sch-system-dialog[data-v-1acf8c74] .el-radio-group {\n        line-height: 40px;\n        position: relative;\n}\n.buildings-devices .m-cen .sch-system-dialog[data-v-1acf8c74] .el-radio-group .el-radio {\n          display: inline-block;\n}\n.buildings-devices .m-cen .sch-system-dialog[data-v-1acf8c74] .el-dialog__footer .dialog-footer {\n        margin: 0 auto;\n        text-align: center;\n}\n.buildings-devices .m-cen .sch-system-dialog[data-v-1acf8c74] .el-dialog__footer .dialog-footer .button-div {\n          clear: both;\n          float: none;\n          margin-right: 20px;\n}\n.buildings-devices .m-cen .pagination-box[data-v-1acf8c74] {\n      width: 100%;\n      height: 60px;\n      background: #fff;\n      -webkit-box-sizing: content-box;\n              box-sizing: content-box;\n}\n.buildings-devices .m-cen .pagination-box .el-pagination[data-v-1acf8c74] {\n        padding-top: 15px;\n}\n.buildings-devices .m-cen .pagination-box .el-pagination.is-background .el-pager li:not(.disabled).active[data-v-1acf8c74] {\n        background-color: #1cab7d;\n}\n.buildings-devices .m-bom[data-v-1acf8c74] {\n    margin-top: 15px;\n    background: #fff;\n}\n.buildings-devices .m-bom .title[data-v-1acf8c74] {\n      border-bottom: 1px solid #e1e1e1;\n}\n.buildings-devices .m-bom .table-box[data-v-1acf8c74] .is-leaf:not(.is-center) {\n      padding: 0 10px;\n      /*width: 200px;*/\n}\n.buildings-devices .m-bom .table-box[data-v-1acf8c74] .is-leaf:not(.is-center) .cell {\n        line-height: 35px;\n        border: 1px solid #e1e1e1;\n        background: #fff;\n        border-radius: 5px;\n}\n.buildings-devices .m-bom .table-box[data-v-1acf8c74] .is-leaf:not(.is-center) .cell .el-table__column-filter-trigger {\n          float: right;\n}\n.buildings-devices .m-bom .table-box[data-v-1acf8c74] .el-table {\n      border-top: 0;\n      border-left: 0;\n}\n.buildings-devices .m-bom .table-box[data-v-1acf8c74] .el-table .el-table__fixed-right {\n        /*border-left: 1px solid #ebeef5;*/\n}\n.buildings-devices .m-bom .table-box[data-v-1acf8c74] .is-leaf:not(.is-center) {\n      padding: 0 10px;\n      /*width: 200px;*/\n}\n.buildings-devices .m-bom .table-box[data-v-1acf8c74] .is-leaf:not(.is-center) .cell {\n        border: 1px solid #e1e1e1;\n        background: #fff;\n        border-radius: 5px;\n}\n.buildings-devices .m-bom .table-box .roll-span[data-v-1acf8c74] {\n      border-bottom: 1px solid #1cab7d;\n      color: #1cab7d;\n}\n.buildings-devices .m-bom .table-box[data-v-1acf8c74] table td:last-child .cell {\n      text-align: center;\n}\n.buildings-devices .m-bom .camara-dialog[data-v-1acf8c74] .el-dialog--center .el-dialog__body {\n      padding-bottom: 0;\n}\n.buildings-devices .title[data-v-1acf8c74] {\n    height: 60px;\n    line-height: 60px;\n    border-bottom: 1px solid #E4E4E4;\n    padding: 0 0 0 3%;\n    font-weight: bold;\n    font-size: 18px;\n}\n.buildings-devices .title .btns1[data-v-1acf8c74], .buildings-devices .title .btns2[data-v-1acf8c74] {\n      display: inline-block;\n      float: right;\n      margin-right: 10px;\n}\n.buildings-devices .title .button-div[data-v-1acf8c74] .button.custom7 {\n      background: transparent;\n      border-color: transparent;\n      color: #333;\n}\n.buildings-devices .title .button-div[data-v-1acf8c74] .button.custom7 img {\n        width: 20px;\n        height: 20px;\n}\n.buildings-devices .title .button-div[data-v-1acf8c74] .button.custom7:hover {\n        background: #f9fffc;\n        border: 1px solid #1cab7d;\n}\n.buildings-devices .title .button-div[data-v-1acf8c74] .button.custom7:active {\n        background: transparent;\n}\n.buildings-devices .sch-system-dialog[data-v-1acf8c74] .el-dialog--center .el-dialog__body {\n    text-align: left;\n}\n",""])},Dosv:function(e,a,t){"use strict";function i(e){t("g7xD")}Object.defineProperty(a,"__esModule",{value:!0});var n=t("mvHQ"),o=t.n(n),s=t("bOdI"),l=t.n(s),c=t("bWJ8"),d=t("q3Lc"),r=t("qqG0"),m=t("zL8q"),v={name:"HelloWorld",components:{Button:c.a,NavMenu:d.a,Toast:r.a},data:function(){var e,a=this,i=function(e,t,i){$.trim(t)?a.checkInputChars(t,i):i(new Error("请输入通道名称")),i()},n=function(e,t,i){$.trim(t)?a.checkInputChars(t,i):i(new Error("请关联设备")),i()},o=function(e,t,i){$.trim(t)?a.checkIP(t,i):i(new Error("请输入摄像头IP")),i()};return e={btn1Data:{iconL:t("QBcd"),iconLAct:t("QBcd")},btn2Data:{iconL:t("KObk"),iconLAct:t("KObk")},btn3Data:{iconL:t("stew"),iconLAct:t("stew")},btn4Data:{iconL:t("UcOn"),iconLAct:t("UcOn")},buildingData:[],switchBtn:!0,addBuild:!1,addBuildModel:"",normalVal:"",bIdx:"",activeInputId:"",choosePlaceName:"",buildBtnTag:"",aisleBtnTag:"",cameraBtnTag:"",aisleData:[],allAisleData:[],aisleData2:[{id:"1",aisle:"校大门",building:"22#",deviceName:"摄像头",deviceID:"200818",deviceIP:"192.168.1.1",settings:"门卫使用"},{id:"1",aisle:"校大门",building:"22#",deviceName:"摄像头1",deviceID:"200818",deviceIP:"192.168.1.2",settings:"门卫使用"},{id:"2",aisle:"校大门",building:"22#",deviceName:"摄像头2",deviceID:"200818",deviceIP:"192.168.1.1",settings:"门卫使用"},{id:"3",aisle:"校大门",building:"22#",deviceName:"摄像头3",deviceID:"200818",deviceIP:"192.168.1.1",settings:"门卫使用"},{id:"4",aisle:"校大门",building:"22#",deviceName:"摄像头4",deviceID:"200818",deviceIP:"192.168.1.1",settings:"门卫使用"},{id:"5",aisle:"校大门",building:"22#",deviceName:"摄像头5",deviceID:"200818",deviceIP:"192.168.1.1",settings:"门卫使用"},{id:"6",aisle:"校大门",building:"22#",deviceName:"摄像头6",deviceID:"200818",deviceIP:"192.168.1.1",settings:"门卫使用"},{id:"7",aisle:"校大门",building:"22#",deviceName:"摄像头7",deviceID:"200818",deviceIP:"192.168.1.1",settings:"门卫使用"}]},l()(e,"aisleData2",[]),l()(e,"aisleSelection",""),l()(e,"aisleForm",{device_number:"",device_name:"",device_IP:"",device_settings:"",device_bind:""}),l()(e,"deviceData",[{device_number:20081868,device_name:"呼哈",device_IP:"192.168.1.2",device_settings:20081868,device_bind:"未绑定"},{device_number:20081868,device_name:"呼哈",device_IP:"192.168.1.2",device_settings:20081868,device_bind:"未绑定"},{device_number:20081868,device_name:"呼哈",device_IP:"192.168.1.2",device_settings:20081868,device_bind:"未绑定"},{device_number:20081868,device_name:"呼哈",device_IP:"192.168.1.2",device_settings:20081868,device_bind:"未绑定"},{device_number:20081868,device_name:"呼哈",device_IP:"192.168.1.2",device_settings:20081868,device_bind:"未绑定"},{device_number:20081868,device_name:"呼哈",device_IP:"192.168.1.2",device_settings:20081868,device_bind:"未绑定"},{device_number:20081868,device_name:"呼哈",device_IP:"192.168.1.2",device_settings:20081868,device_bind:"未绑定"}]),l()(e,"deviceData",[]),l()(e,"showIndex",!1),l()(e,"tableLoading",!1),l()(e,"tableLoading1",!1),l()(e,"tableLoading2",!1),l()(e,"cameraData",[]),l()(e,"allNum",80),l()(e,"currentPage",1),l()(e,"pageItem",20),l()(e,"isToast",!1),l()(e,"toast",""),l()(e,"spanArr",[]),l()(e,"filtersData",[]),l()(e,"cameraFiltersData",[]),l()(e,"addAisleDialog",!1),l()(e,"aisleDevForm",{placeId:"",channelName:"",deviceName:"",deviceType:""}),l()(e,"addDevForm",{}),l()(e,"addAisle_SelectDevDialog",!1),l()(e,"devList",[{name:"门控道闸"},{name:"考勤门禁一体机"}]),l()(e,"doorData1",[]),l()(e,"doorData2",[]),l()(e,"actDevTag",0),l()(e,"searchDev",""),l()(e,"searchDev2",""),l()(e,"lockValue",""),l()(e,"doorLockList",[{lockNo:"1号门锁接口(未分配)",dis:0,id:1},{lockNo:"2号门锁接口(已分配)",dis:1,id:2},{lockNo:"3号门锁接口(已分配)",dis:1,id:3},{lockNo:"4号门锁接口(已分配)",dis:0,id:4},{lockNo:"5号门锁接口(已分配)",dis:0,id:5}]),l()(e,"doorLockList",[]),l()(e,"doorRowData",{}),l()(e,"doorRowData2",{}),l()(e,"devSelectInfo",!1),l()(e,"devSelectInfo2",!1),l()(e,"aisleDevFormRules",{placeId:[{required:!0,message:"请选择楼宇"}],channelName:[{required:!0,validator:i,trigger:"blur"}],deviceName:[{required:!0,validator:n,trigger:"blur"}]}),l()(e,"addCameraDialog",!1),l()(e,"aisleCameraForm",{placeId:"",channelId:"",cameraDirect:"",cameraType:"",cameraPhoto:[]}),l()(e,"cameraSideData",[{cameraDirectValue:"进门/出门",cameraDirect:1},{cameraDirectValue:"进门",cameraDirect:2},{cameraDirectValue:"出门",cameraDirect:3}]),l()(e,"cameraSideData",[]),l()(e,"cameraTypeData",[{cameraTypeValue:"海康威视",cameraType:1},{cameraTypeValue:"大华",cameraType:2}]),l()(e,"cameraTypeData",[]),l()(e,"photographType",[{name:"开门成功抓拍",id:"1"},{name:"开门失败抓拍",id:"2"}]),l()(e,"aisleCameraFormRules",{placeId:[{required:!0,message:"请选择楼宇"}],channelId:[{required:!0,message:"请输入通道名称"}],cameraDirect:[{required:!0,message:"请选择关联方向"}],cameraType:[{required:!0,message:"请选择摄像头类型"}],cameraIp:[{required:!0,validator:o}],cameraUser:[{required:!0,message:"请输入用户名"}],cameraPwd:[{required:!0,message:"请输入密码"}],cameraPhoto:[{required:!0,message:"请选择抓拍类型",trigger:"change"}]}),l()(e,"cameraId",""),e},methods:{addClick:function(){setTimeout(function(){$(".add-build-input input").focus()}),this.addBuildModel="",this.addBuild=!0,this.switchBtn=!1,this.buildBtnTag=1},editClick:function(){var e=this;this.buildBtnTag=2;var a=$(".buildings-devices .m-top .el-input.act");$(".buildings-devices .m-top .el-input.act").parent().siblings();if(0!=a.length){$(a).find("input").removeAttr("readonly"),a.addClass("edit"),$(a).find("input").focus(),this.normalVal=$(a).find("input").val(),setTimeout(function(){$(a).find("input").val(e.normalVal)}),this.switchBtn=!1;var t=$(".buildings-devices .m-top .content .shade-div"),i=$(".buildings-devices .m-top .el-input.act").parent();t.css("z-index",2),i.css("z-index",3);var n=$(a).find("input")[0],o=$(a).find("input").val().length;this.setCaretPosition(n,o)}else this.$message({message:"请选择要修改的楼宇",type:"warning",duration:this.msgDuration});this.resizeInputWidth()},deleteClick:function(){var e=this;if(this.buildBtnTag=3,0!=$(".buildings-devices .m-top .el-input.act").length){var a={placeId:this.activeInputId};this.$api.Rules.beforeDeletePlace(a).then(function(t){600!=t.data.code&&0!=t.data.code||e.$confirm((t.data.data.msg?"该楼宇下关联"+t.data.data.msg+"，删除楼宇将一并删除":"此操作将永久删除")+"， 请谨慎操作。是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){m.Loading.service(),e.$api.Rules.deletePlace(a).then(function(a){m.Loading.service().close(),e.isToast=!0,e.toast=a.data.msg,600!=a.data.code&&0!=a.data.code||($(".buildings-devices .m-top").find(".el-input").removeClass("act"),$(".buildings-devices .m-top .groupBtn:first-child").find(".el-input").addClass("act"),e.activeInputId="",e.loadBuildData(),e.loadAisleData(),e.loadCameraData())}).catch(function(e){m.Loading.service().close()})}).catch(function(){e.$message({type:"info",message:"已取消删除",duration:e.msgDuration})})})}else this.$message({message:"请选择要删除的楼宇",type:"warning",duration:this.msgDuration})},saveClick:function(e,a){var t=this;if(1==this.buildBtnTag)if(""!=this.addBuildModel){var i=this.formOutTest(e,a);if(!i)return void setTimeout(function(){$(".add-build-input input").focus()});m.Loading.service();var n={schoolId:localStorage.getItem("schoolId"),placeParentId:localStorage.getItem("placeTopId"),placeName:this.addBuildModel};this.$api.Rules.addPlace(n).then(function(e){t.isToast=!0,t.toast=e.data.msg,m.Loading.service().close(),600!=e.data.code&&0!=e.data.code||(t.loadBuildData(),t.addBuild=!1,t.switchBtn=!0)}).catch(function(e){m.Loading.service().close()})}else this.$message({message:"请输入楼宇名称",type:"warning",duration:this.msgDuration,onClose:function(){setTimeout(function(){$(".add-build-input input").focus()})}});else if(2==this.buildBtnTag){var o=$(".buildings-devices .m-top .el-input.act"),s=$(o).find("input").val(),l=this.formOutTest(s,a);if(!l)return void(s?setTimeout(function(){$(o).find("input").focus()}):this.$message({message:"请输入楼宇名称",type:"warning",duration:this.msgDuration,onClose:function(){setTimeout(function(){$(o).find("input").focus()})}}));m.Loading.service();var c={placeId:this.activeInputId,placeName:s};this.$api.Rules.updatePlace(c).then(function(e){if(t.isToast=!0,t.toast=e.data.msg,m.Loading.service().close(),600==e.data.code||0==e.data.code){var a=$(".buildings-devices .m-top .content .shade-div"),i=$(".buildings-devices .m-top .el-input.act").parent();a.css("z-index",0),i.css("z-index",1),$(o).find("input").attr("readOnly","true"),o.removeClass("edit"),t.switchBtn=!0,t.loadAisleData(),t.loadCameraData()}}).catch(function(e){m.Loading.service().close()})}this.resizeLayout(),this.resizeInputWidth()},cancel:function(){this.addBuild=!1,this.switchBtn=!0;var e=$(".buildings-devices .m-top .el-input.act");if($(e).find("input").attr("readOnly","true"),e.removeClass("edit"),2==this.buildBtnTag){var a=$(".buildings-devices .m-top .content .shade-div"),t=$(".buildings-devices .m-top .el-input.act").parent();a.css("z-index",0),t.css("z-index",1),$(e).find("input").val(this.normalVal),this.buildingData[this.bIdx].placeName=this.normalVal}this.resizeLayout(),this.resizeInputWidth()},clickInput:function(e,a,t){$(a.target).parent().addClass("act").parent().siblings().find(".el-input").removeClass("act"),this.activeInputId=e.placeId,this.choosePlaceName=e.placeName,this.bIdx=t,this.loadAisleData(),this.loadCameraData()},checkBlur:function(e){e?this.formOutTest(e,"checkInputChars"):this.$message({showClose:!0,message:"输入内容不能为空",type:"error",duration:1e3})},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].clearValidate()},addAisle:function(){var e=this;this.addAisleDialog=!0,this.aisleBtnTag=1,this.lockValue="",this.devSelectInfo=!1,this.devSelectInfo2=!1,this.doorRowData={},this.doorRowData2={},this.aisleDevForm={placeId:"",channelName:"",deviceName:""},setTimeout(function(){e.$refs.aisleDevForm.clearValidate(),e.aisleDevForm.placeId=e.activeInputId,e.aisleDevForm.placeName=e.choosePlaceName})},addDevBtn:function(){this.addAisle_SelectDevDialog=!0,this.actDevTag=0,this.searchDev="",this.searchDev2="",setTimeout(function(){$(".add-dev-dialog .content .ct-table").height("200px")}),this.getDoorData(2,"doorData1",200,"doorRowData","addDoorDevTable",this.searchDev)},addDevClickTag:function(e){this.actDevTag=e,0==e?(setTimeout(function(){$(".add-dev-dialog .content .ct-table").height("200px")}),this.getDoorData(2,"doorData1",200,"doorRowData","addDoorDevTable",this.searchDev)):1==e&&(setTimeout(function(){$(".add-dev-dialog .content2 .ct-table").height("300px")}),this.getDoorData(1,"doorData2",300,"doorRowData2","addDoorDevTable2",this.searchDev2))},search:function(){0==this.actDevTag?this.getDoorData(2,"doorData1",200,"doorRowData","addDoorDevTable",this.searchDev):1==this.actDevTag&&this.getDoorData(1,"doorData2",300,"doorRowData2","addDoorDevTable2",this.searchDev2)},clickDoorDevRow:function(e){if(0==this.actDevTag)if(this.getDoorLock(e.deviceId,e.deviceNo),"{}"==o()(this.doorRowData))this.doorRowData=e;else{this.lockValue="";var a=e;a.lockNo=this.doorRowData.lockNo,this.doorRowData=a}else 1==this.actDevTag&&(this.doorRowData2=e)},saveSelectDoorDev:function(){var e=this;if(this.devSelectInfo=!1,this.devSelectInfo2=!1,0==this.actDevTag){if("{}"==o()(this.doorRowData))return void this.$message({message:"请选择设备！",type:"warning",duration:this.msgDuration});if(""==this.lockValue)return void this.$message({message:"请选择门锁接口！",type:"warning",duration:this.msgDuration});this.addAisle_SelectDevDialog=!1,this.devSelectInfo=!0,this.aisleDevForm.deviceName=this.doorRowData.deviceName,this.aisleDevForm.deviceNo=this.doorRowData.deviceNo,this.aisleDevForm.lockNo=this.lockValue,this.aisleDevForm.lockName=this.lockValue+"号门锁接口",this.aisleDevForm.deviceId=this.doorRowData.deviceId,this.aisleDevForm.deviceIp=this.doorRowData.deviceIp,this.aisleDevForm.deviceType=this.doorRowData.deviceType}else if(1==this.actDevTag){if("{}"==o()(this.doorRowData2))return void this.$message({message:"请选择设备！",type:"warning",duration:this.msgDuration});this.addAisle_SelectDevDialog=!1,this.devSelectInfo2=!0,this.aisleDevForm.deviceName=this.doorRowData2.deviceName,this.aisleDevForm.deviceNo=this.doorRowData2.deviceNo,this.aisleDevForm.deviceId=this.doorRowData2.deviceId,this.aisleDevForm.deviceIp=this.doorRowData2.deviceIp,this.aisleDevForm.deviceType=this.doorRowData2.deviceType,this.aisleDevForm.lockNo="",this.aisleDevForm.lockName="",setTimeout(function(){e.$refs.aisleDevForm.clearValidate(["deviceName"])})}},rowUpdate:function(e){var a=this;this.addAisleDialog=!0,this.aisleBtnTag=2,this.aisleDevForm={},this.doorRowData={},this.doorRowData2={},this.devSelectInfo=!1,this.devSelectInfo2=!1,setTimeout(function(){a.$refs.aisleDevForm.clearValidate()}),this.aisleDevForm=JSON.parse(o()(e)),1==e.deviceType?(this.devSelectInfo2=!0,this.doorRowData2=this.aisleDevForm):2==e.deviceType&&(this.devSelectInfo=!0,this.aisleDevForm.lockName=e.lockNo+"号门锁接口",this.doorRowData=this.aisleDevForm)},deleteAisle:function(e){var a=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){m.Loading.service();var t={placeId:e.placeId,channelId:e.channelId,deviceId:e.deviceId,schoolId:localStorage.getItem("schoolId")};a.$api.Rules.deleteInoutDev(t).then(function(e){m.Loading.service().close(),600==e.data.code||0==e.data.code?(a.$message({type:"success",message:"删除成功!"}),a.loadAisleData()):(a.isToast=!0,a.toast=e.data.msg)}).catch(function(e){m.Loading.service().close()})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},saveAisleForm:function(){var e=this;this.$refs.aisleDevForm.validate(function(a){if(!a)return!1;m.Loading.service();var t={placeId:e.aisleDevForm.placeId,placeName:e.aisleDevForm.placeName,channelId:e.aisleDevForm.channelId,channelName:e.aisleDevForm.channelName,deviceName:e.aisleDevForm.deviceName?e.aisleDevForm.deviceName:"",deviceId:e.aisleDevForm.deviceName&&e.aisleDevForm.deviceId?e.aisleDevForm.deviceId:"",deviceIp:e.aisleDevForm.deviceName&&e.aisleDevForm.deviceIp?e.aisleDevForm.deviceIp:"",deviceType:e.aisleDevForm.deviceName&&e.aisleDevForm.deviceType?e.aisleDevForm.deviceType:"",lockNo:e.aisleDevForm.deviceName&&e.aisleDevForm.lockNo?e.aisleDevForm.lockNo:"",schoolId:localStorage.getItem("schoolId"),schoolName:localStorage.getItem("schoolName"),deviceNo:e.aisleDevForm.deviceName&&e.aisleDevForm.deviceNo?e.aisleDevForm.deviceNo:""};1==e.aisleBtnTag?e.$api.Rules.addInoutDev(t).then(function(a){m.Loading.service().close(),e.isToast=!0,e.toast=a.data.msg,600!=a.data.code&&0!=a.data.code||(e.addAisleDialog=!1,e.loadAisleData())}).catch(function(e){m.Loading.service().close()}):2==e.aisleBtnTag&&e.$api.Rules.updateInoutDev(t).then(function(a){m.Loading.service().close(),e.isToast=!0,e.toast=a.data.msg,600!=a.data.code&&0!=a.data.code||(e.addAisleDialog=!1,e.loadAisleData())},function(e){m.Loading.service().close()})})},channelSelectBuild:function(e){var a={};a=this.buildingData.find(function(a){return a.placeId===e}),this.aisleDevForm.placeName=a.placeName},addCamera:function(){var e=this;this.addCameraDialog=!0,this.cameraBtnTag=1,this.getAisleData(""),this.aisleCameraForm={placeId:"",channelId:"",cameraDirect:"",cameraType:"",cameraPhoto:["1","2"],cameraIp:"",cameraUser:"",cameraPwd:""},setTimeout(function(){e.$refs.aisleCameraForm.clearValidate(),e.aisleCameraForm.placeId=e.activeInputId,e.aisleCameraForm.placeName=e.choosePlaceName}),this.getCaremaDialogData()},editCamera:function(e){if(this.cameraId=e.cameraId,this.addCameraDialog=!0,this.cameraBtnTag=2,this.getAisleData(""),this.getCaremaDialogData(),this.aisleCameraForm={id:e.id,placeId:e.placeId,placeName:e.placeName,channelName:e.channelName,channelId:e.channelId,cameraDirect:e.cameraDirect,cameraType:parseInt(e.cameraType),cameraIp:e.cameraIp,cameraUser:e.cameraUser,cameraPwd:e.cameraPwd,cameraPhoto:e.cameraPhoto},3==this.aisleCameraForm.cameraPhoto)this.aisleCameraForm.cameraPhoto=["1","2"];else if(1==this.aisleCameraForm.cameraPhoto)this.aisleCameraForm.cameraPhoto=["1"];else{var a=[],t=this.aisleCameraForm.cameraPhoto.toString().split();t.forEach(function(e,t,i){a.push(+e)}),this.aisleCameraForm.cameraPhoto=t}},deleteCamera:function(e){var a=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){m.Loading.service(),a.$api.Rules.deleteCameraList({id:e.id}).then(function(e){m.Loading.service().close(),600==e.data.code||0==e.data.code?(a.$message({type:"success",message:"删除成功!"}),a.loadCameraData()):(a.isToast=!0,a.toast=e.data.msg)}).catch(function(e){m.Loading.service().close()})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},caremaSelectBuild:function(e){var a={};a=this.buildingData.find(function(a){return a.placeId===e}),this.aisleCameraForm.placeName=a.placeName,this.getAisleData(e),this.aisleCameraForm.channelId="",this.aisleCameraForm.channelName=""},caremaSelectChannel:function(e){var a={};a=this.aisleData.find(function(a){return a.channelId===e}),this.aisleCameraForm.channelName=a.channelName},saveCameraForm:function(){var e=this;this.$refs.aisleCameraForm.validate(function(a){if(!a)return e.$message({message:"请输入内容（*为必填项）",type:"error",duration:e.msgDuration}),!1;m.Loading.service(),2==e.aisleCameraForm.cameraPhoto.length?e.aisleCameraForm.cameraPhoto="3":e.aisleCameraForm.cameraPhoto=e.aisleCameraForm.cameraPhoto.join(",");var t={schoolId:localStorage.getItem("schoolId"),id:e.aisleCameraForm.id,placeId:e.aisleCameraForm.placeId,placeName:e.aisleCameraForm.placeName,channelName:e.aisleCameraForm.channelName,channelId:e.aisleCameraForm.channelId,cameraDirect:e.aisleCameraForm.cameraDirect,cameraType:e.aisleCameraForm.cameraType,cameraIp:e.aisleCameraForm.cameraIp,cameraUser:e.aisleCameraForm.cameraUser,cameraPwd:e.aisleCameraForm.cameraPwd,cameraPhoto:e.aisleCameraForm.cameraPhoto};1==e.cameraBtnTag?e.$api.Rules.addCamera(t).then(function(a){m.Loading.service().close(),e.isToast=!0,e.toast=a.data.msg,600!=a.data.code&&0!=a.data.code||(e.addCameraDialog=!1,e.loadCameraData())}).catch(function(e){m.Loading.service().close()}):2==e.cameraBtnTag&&(t.cameraId=e.cameraId,e.$api.Rules.updateCameraList(t).then(function(a){m.Loading.service().close(),e.isToast=!0,e.toast=a.data.msg,600!=a.data.code&&0!=a.data.code||(e.addCameraDialog=!1,e.loadCameraData())}).catch(function(e){m.Loading.service().close()}))})},objectSpanMethod:function(e){var a=(e.row,e.column,e.rowIndex),t=e.columnIndex;if(1==t||2==t||6==t){var i=this.spanArr[a];return{rowspan:i,colspan:i>0?1:0}}},getSpanArr:function(e){for(var a=0;a<e.length;a++)0===a?(this.spanArr.push(1),this.pos=0):e[a].id===e[a-1].id?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=a)},filterTag:function(e,a){return a.channelName===e},handleSelectionChange:function(e){this.aisleSelection=e},toggleSelection:function(e){this.$refs.aisleTable.toggleRowSelection(e)},handleSizeChange:function(e){this.pageItem=e,this.currentPage=1,this.changePage(this.pageItem,this.currentPage)},handleCurrentChange:function(e){this.currentPage=e,this.changePage(this.pageItem,this.currentPage)},hideToast:function(){this.isToast=!1},getCaremaDialogData:function(){var e=this;this.$api.Rules.getCameraFx().then(function(a){600==a.data.code||0==a.data.code?e.cameraSideData=a.data.data:(e.isToast=!0,e.toast=a.data.msg)}),this.$api.Rules.getCameraType().then(function(a){600==a.data.code||0==a.data.code?e.cameraTypeData=a.data.data:(e.isToast=!0,e.toast=a.data.msg)})},getDoorData:function(e,a,t,i,n,s){var l=this,c={schoolId:localStorage.getItem("schoolId"),pageNum:1,page_size:1e4,deviceType:e,devNameLike:s};this.$api.Rules.selectDevList(c).then(function(s){if(600==s.data.code||0==s.data.code){if(l[a]=s.data.data.records,1==e&&l[a].forEach(function(e,t){0!=e.isUsed&&l[a].splice(t,1)}),0==l[a].length)return void(l.doorLockList=[]);$.each(l[a],function(e,t){l.$set(l[a][e],"indexID",(l.currentPage-1)*l[a].length+e+1)}),setTimeout(function(){$(".add-dev-dialog .ct-table").height(t+"px"),"{}"==o()(l[i])?1==l.aisleBtnTag?(l.$refs[n].setCurrentRow(l[a][0]),l[i]=l[a][0],"doorRowData"==i&&l.getDoorLock(l[i].deviceId,l[i].deviceNo)):2==l.aisleBtnTag&&"doorRowData"==i&&(l.lockValue="",l.doorLockList=[]):l[a].forEach(function(e){e.deviceId==l[i].deviceId&&setTimeout(function(){l.$refs[n].setCurrentRow(e),2==l.aisleBtnTag&&"doorRowData"==i&&(l.getDoorLock(l[i].deviceId,l[i].deviceNo),l.lockValue=l[i].lockNo)})})})}else l.isToast=!0,l.toast=s.data.msg})},getDoorLock:function(e,a){var t=this,i={deviceId:e,deviceNo:a};this.$api.Rules.selectLock(i).then(function(e){600==e.data.code||0==e.data.code?(t.doorLockList=e.data.data,2==t.aisleBtnTag&&0==t.actDevTag&&(t.lockValue=t.doorRowData.lockNo)):(t.isToast=!0,t.toast=e.data.msg)})},loadBuildData:function(){var e=this,a={placeId:0};this.$api.Rules.getBuildList(a).then(function(a){600==a.data.code||0==a.data.code?(e.buildingData=a.data.data,e.resizeInputWidth()):(e.isToast=!0,e.toast=a.data.msg)})},loadAisleData:function(){var e=this;this.tableLoading1=!0;var a={count:!0,page_index:this.currentPage,page_size:1e4,search:{placeId:this.activeInputId}};this.$api.Rules.selectInoutList(a).then(function(a){if(e.tableLoading1=!1,600==a.data.code||0==a.data.code){e.resizeLayout(),e.aisleData=a.data.data.records;var t=void 0,i=[];$.each(e.aisleData,function(a,t){e.$set(e.aisleData[a],"indexID",(e.currentPage-1)*e.aisleData.length+a+1),t.channelName&&i.push(t.channelName)}),t=i.filter(function(e,a,t){return t.indexOf(e)==a});var n=[];$.each(t,function(e,a){var t={};t.text=a,t.value=a,n[e]=t}),e.filtersData=n}else e.isToast=!0,e.toast=a.data.msg}).catch(function(a){e.tableLoading1=!1})},loadCameraData:function(){var e=this;this.tableLoading2=!0;var a={count:!0,page_index:this.currentPage,page_size:1e4,search:{placeId:this.activeInputId}};this.$api.Rules.selectCameraList(a).then(function(a){if(e.tableLoading2=!1,600==a.data.code||0==a.data.code){e.resizeLayout(),e.cameraData=a.data.data.records;var t=void 0,i=[];$.each(e.cameraData,function(a,t){e.$set(e.cameraData[a],"indexID",(e.currentPage-1)*e.cameraData.length+a+1),t.channelName&&i.push(t.channelName)}),t=i.filter(function(e,a,t){return t.indexOf(e)==a});var n=[];$.each(t,function(e,a){var t={};t.text=a,t.value=a,n[e]=t}),e.cameraFiltersData=n}else e.isToast=!0,e.toast=a.data.msg}).catch(function(a){e.tableLoading2=!1})},getAisleData:function(e){var a=this,t={count:!0,page_index:1,page_size:1e4,search:{placeId:e}};this.$api.Rules.selectInoutList(t).then(function(e){600==e.data.code||0==e.data.code?a.allAisleData=e.data.data.records:(a.isToast=!0,a.toast=e.data.msg)})},resizeLayout:function(){setTimeout(function(){var e=$(".index > .m-cen").height(),a=$(".index .set-top").height(),t=$(".buildings-devices > .m-top").height(),i=($(".buildings-devices .m-cen .title").height(),$(".pagination-box").height(),e-$(".buildings-devices .title").height()-t-$(".buildings-devices > .m-cen").height()-a-40);$(".buildings-devices .m-bom .table-box").height(i)},20)},resizeInputWidth:function(){var e=this;setTimeout(function(){var a=$(".buildings-devices .m-top .el-input input");$.each(a,function(a,t){var i=e.inputValLength(t);t.size=i.numLen+i.enLen+i.textLen,$(t).on("input propertychange",function(){var a=e.inputValLength(t);t.size=a.numLen+a.enLen+a.textLen})})})},inputValLength:function(e){var a={numLen:0,enLen:0,textLen:1},t=/\d/g,i=/[a-zA-Z]/g,n=/[\u4e00-\u9fa5]/g;return null!=$(e).val().match(t)&&(a.numLen=$(e).val().match(t).length),null!=$(e).val().match(i)&&(a.enLen=$(e).val().match(i).length),null!=$(e).val().match(n)&&(a.textLen=Math.floor(1.85*$(e).val().match(n).length)),a},setCaretPosition:function(e,a){if(e.setSelectionRange)setTimeout(function(){e.setSelectionRange(a,a),e.focus()},0);else if(e.createTextRange){var t=e.createTextRange();t.move("character",a),t.select()}},formOutTest:function(e,a){return!!e&&this[a](e,"",1,1)}},mounted:function(){this.roleActions=this.$store.state.Common.roleActions,this.resizeLayout(),this.resizeInputWidth(),this.loadBuildData(),this.loadAisleData(),this.loadCameraData()}},u=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"buildings-devices"},[t("div",{staticClass:"m-top"},[t("div",{staticClass:"title"},[e._v("\n                楼宇\n                "),e.switchBtn?t("div",{staticClass:"btns1"},[e.roleActions.indexOf("设备与场所_@bepf@devPlace@addPlace_create_own")>-1?t("Button",{attrs:{title:"添加楼宇",btnClass:"custom7",data:e.btn1Data,btnFontSize:"12px",iconLeft:!0},on:{click:e.addClick}}):e._e(),e._v(" "),e.roleActions.indexOf("设备与场所_@bepf@devPlace@updatePlace_update_own")>-1?t("Button",{attrs:{title:"修改",btnClass:"custom7",data:e.btn2Data,btnFontSize:"12px",iconLeft:!0,dised1:""==e.activeInputId},on:{click:e.editClick}}):e._e(),e._v(" "),e.roleActions.indexOf("设备与场所_@bepf@devPlace@deletePlace_delete_own")>-1?t("Button",{attrs:{title:"删除",btnClass:"custom7",data:e.btn3Data,btnFontSize:"12px",iconLeft:!0,dised1:""==e.activeInputId},on:{click:e.deleteClick}}):e._e()],1):t("div",{staticClass:"btns2"},[t("Button",{attrs:{title:"保存",btnClass:"custom7",btnFontSize:"12px"},on:{click:function(a){return e.saveClick(e.addBuildModel,"checkInputChars")}}}),e._v(" "),t("Button",{attrs:{title:"取消",btnClass:"custom7",btnFontSize:"12px"},on:{click:e.cancel}})],1)]),e._v(" "),t("div",{staticClass:"content"},[t("div",{staticClass:"content-div"},[t("div",{staticClass:"groupBtn",on:{click:function(a){return e.clickInput({placeId:"",placeName:""},a,-1)}}},[t("el-input",{staticClass:"act",attrs:{placeholder:"请输入内容",value:"全部",size:"small",readonly:""}})],1),e._v(" "),e._l(e.buildingData,function(a,i){return t("div",{key:i,staticClass:"groupBtn",on:{click:function(t){return e.clickInput(a,t,i)}}},[t("el-input",{attrs:{placeholder:"请输入内容",value:a.placeName,size:"small",readonly:""},model:{value:a.placeName,callback:function(t){e.$set(a,"placeName",t)},expression:"build.placeName"}})],1)}),e._v(" "),e.addBuild?t("div",{staticClass:"groupBtn"},[t("el-input",{staticClass:"add-build-input",attrs:{placeholder:"请输入内容",size:"small"},model:{value:e.addBuildModel,callback:function(a){e.addBuildModel=a},expression:"addBuildModel"}})],1):e._e(),e._v(" "),t("div",{staticClass:"shade-div"})],2)])]),e._v(" "),t("div",{staticClass:"m-cen"},[t("div",{staticClass:"title"},[e._v("\n                通道与设备\n                "),t("div",{staticClass:"btns1"},[e.roleActions.indexOf("设备与场所_@bepf@devPlace@addInoutDev_create_own")>-1?t("Button",{attrs:{title:"添加",btnClass:"custom7",data:e.btn1Data,btnFontSize:"12px",iconLeft:!0},on:{click:e.addAisle}}):e._e()],1)]),e._v(" "),t("div",{staticClass:"content"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading1,expression:"tableLoading1"}],ref:"aisleTable",staticStyle:{width:"100%"},attrs:{id:"table",height:"100%",data:e.aisleData,"tooltip-effect":"dark",border:"","row-key":"deviceinfo_id"},on:{"row-click":e.toggleSelection,"selection-change":e.handleSelectionChange}},[e.showIndex?t("el-table-column",{attrs:{prop:"channelId"}}):e._e(),e._v(" "),t("el-table-column",{attrs:{fixed:"",prop:"indexID",label:"序号",width:"80",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"placeName",label:"所属楼宇",align:"center","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{prop:"channelName",label:"全部通道",width:"150",filters:e.filtersData,"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.channelName?a.row.channelName:""))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"deviceName",label:"设备名称",align:"center","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{prop:"deviceNo",label:"序列号",align:"center","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{prop:"deviceIp",label:"设备IP",align:"center","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.roleActions.indexOf("设备与场所_@bepf@devPlace@updateInoutDev_update_own")>-1?t("el-button",{staticClass:"normal",attrs:{size:"mini",plain:""},on:{click:function(t){return e.rowUpdate(a.row)}}},[e._v("修改")]):e._e(),e._v(" "),e.roleActions.indexOf("设备与场所_@bepf@devPlace@deleteInoutDev_delete_own")>-1?t("el-button",{staticClass:"warning",attrs:{size:"mini",plain:""},on:{click:function(t){return e.deleteAisle(a.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1),e._v(" "),t("el-dialog",{staticClass:"sch-system-dialog aisle-dialog",attrs:{title:"通道与设备",visible:e.addAisleDialog,width:"720px",center:""},on:{"update:visible":function(a){e.addAisleDialog=a}}},[t("div",{staticClass:"content"},[t("el-form",{ref:"aisleDevForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.aisleDevForm,rules:e.aisleDevFormRules,"label-width":"90px"}},[t("el-form-item",{attrs:{label:"所属楼宇：",prop:"placeId"}},[t("el-select",{attrs:{placeholder:"请选择楼宇"},on:{change:e.channelSelectBuild},model:{value:e.aisleDevForm.placeId,callback:function(a){e.$set(e.aisleDevForm,"placeId",a)},expression:"aisleDevForm.placeId"}},e._l(e.buildingData,function(e){return t("el-option",{key:e.placeId,attrs:{label:e.placeName,value:e.placeId}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"通道名称：",prop:"channelName"}},[t("el-input",{attrs:{placeholder:"请输入通道名称"},model:{value:e.aisleDevForm.channelName,callback:function(a){e.$set(e.aisleDevForm,"channelName",a)},expression:"aisleDevForm.channelName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"关联设备："}},[e.devSelectInfo?t("div",{staticClass:"dev-select-info"},[t("span",[e._v("设备名称")]),e._v(" "),t("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入设备名称"},model:{value:e.aisleDevForm.deviceName,callback:function(a){e.$set(e.aisleDevForm,"deviceName",a)},expression:"aisleDevForm.deviceName"}}),e._v(" "),t("span",[e._v("门锁接口")]),e._v(" "),t("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"",disabled:!0},model:{value:e.aisleDevForm.lockName,callback:function(a){e.$set(e.aisleDevForm,"lockName",a)},expression:"aisleDevForm.lockName"}})],1):e._e(),e._v(" "),e.devSelectInfo2?t("div",{staticClass:"dev-select-info"},[t("span",[e._v("设备名称")]),e._v(" "),t("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:"请输入设备名称"},model:{value:e.aisleDevForm.deviceName,callback:function(a){e.$set(e.aisleDevForm,"deviceName",a)},expression:"aisleDevForm.deviceName"}})],1):e._e(),e._v(" "),t("Button",{attrs:{title:"选择设备",btnClass:"custom8",btnFontSize:"12px",btnHeight:"30px"},on:{click:e.addDevBtn}})],1),e._v(" "),t("el-form-item",{attrs:{label:" "}})],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{title:"取消",btnClass:"custom7",btnFontSize:"12px",btnHeight:"4.5vh"},on:{click:function(a){e.addAisleDialog=!1}}}),e._v(" "),t("Button",{attrs:{title:"保存",btnClass:"custom8",btnFontSize:"12px",btnHeight:"4.5vh"},on:{click:e.saveAisleForm}})],1)]),e._v(" "),t("el-dialog",{staticClass:"sch-system-dialog add-dev-dialog",attrs:{title:"选择设备",visible:e.addAisle_SelectDevDialog,width:"800px",center:""},on:{"update:visible":function(a){e.addAisle_SelectDevDialog=a}}},[t("ul",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},e._l(e.devList,function(a,i){return t("li",{key:i,class:{"act-li":e.actDevTag==i}},[t("span",{on:{click:function(a){return e.addDevClickTag(i)}}},[e._v(e._s(a.name))])])}),0),e._v(" "),0==e.actDevTag?t("div",{staticClass:"content"},[t("div",{staticClass:"c-top"},[t("div",{staticClass:"ct-title"},[t("span",[e._v("选择设备：")]),e._v(" "),t("el-input",{staticStyle:{width:"230px",float:"right"},attrs:{size:"small",placeholder:"请输入设备名称或设备序号查询"},on:{change:e.search},model:{value:e.searchDev,callback:function(a){e.searchDev=a},expression:"searchDev"}},[t("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.search},slot:"suffix"})])],1),e._v(" "),t("div",{staticClass:"ct-table"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"addDoorDevTable",staticStyle:{width:"100%"},attrs:{id:"table",height:"100%",data:e.doorData1,"tooltip-effect":"dark",border:"","highlight-current-row":""},on:{"row-click":e.clickDoorDevRow,"selection-change":e.handleSelectionChange}},[e.showIndex?t("el-table-column",{attrs:{prop:"deviceId"}}):e._e(),e._v(" "),t("el-table-column",{attrs:{fixed:"",prop:"indexID",label:"序号",width:"80",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"deviceName",label:"设备名称",align:"center","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{prop:"deviceNo",label:"序列号",align:"center","show-overflow-tooltip":""}})],1)],1)]),e._v(" "),t("div",{staticClass:"c-bom"},[t("div",{staticClass:"cb-title"},[t("span",[e._v("选择门锁接口：")])]),e._v(" "),t("div",{staticClass:"cb-radio"},e._l(e.doorLockList,function(a){return t("el-radio",{key:a.lockNo,attrs:{label:a.lockNo,disabled:1==a.isUsed},model:{value:e.lockValue,callback:function(a){e.lockValue=a},expression:"lockValue"}},[e._v("\n                                "+e._s(a.lockNo)+"号门锁接口"+e._s(1==a.isUsed?"(已分配)":"(未分配)"))])}),1)])]):e._e(),e._v(" "),1==e.actDevTag?t("div",{staticClass:"content content2"},[t("div",{staticClass:"c-top"},[t("div",{staticClass:"ct-title"},[t("span",[e._v("选择设备：")]),e._v(" "),t("el-input",{staticStyle:{width:"230px",float:"right"},attrs:{size:"small",placeholder:"请输入设备名称或设备IP查询"},on:{change:e.search},model:{value:e.searchDev2,callback:function(a){e.searchDev2=a},expression:"searchDev2"}},[t("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.search},slot:"suffix"})])],1),e._v(" "),t("div",{staticClass:"ct-table"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"addDoorDevTable2",staticStyle:{width:"100%"},attrs:{id:"table",height:"100%",data:e.doorData2,"tooltip-effect":"dark",border:"","highlight-current-row":"","row-key":"deviceinfo_id"},on:{"row-click":e.clickDoorDevRow,"selection-change":e.handleSelectionChange}},[e.showIndex?t("el-table-column",{attrs:{prop:"deviceId"}}):e._e(),e._v(" "),t("el-table-column",{attrs:{fixed:"",prop:"indexID",label:"序号",width:"80",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"deviceName",label:"设备名称",align:"center","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{prop:"deviceId",label:"设备ID",align:"center","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{prop:"deviceIp",label:"设备IP",align:"center","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{prop:"isUsed",label:"分配状态",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.isUsed?t("span",[e._v(e._s(1==a.row.isUsed?"已分配":"未分配"))]):e._e()]}}])})],1)],1)])]):e._e(),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{title:"取消",btnClass:"custom7",btnFontSize:"12px",btnHeight:"4.5vh"},on:{click:function(a){e.addAisle_SelectDevDialog=!1}}}),e._v(" "),t("Button",{attrs:{title:"保存",btnClass:"custom8",btnFontSize:"12px",btnHeight:"4.5vh"},on:{click:e.saveSelectDoorDev}})],1)])],1),e._v(" "),t("div",{staticClass:"m-bom"},[t("div",{staticClass:"title"},[e._v("\n                通道与摄像头\n                "),t("div",{staticClass:"btns1"},[e.roleActions.indexOf("设备与场所_@bepf@devPlace@addCamera_create_own")>-1?t("Button",{attrs:{title:"添加",btnClass:"custom7",data:e.btn1Data,btnFontSize:"12px",iconLeft:!0},on:{click:e.addCamera}}):e._e()],1)]),e._v(" "),t("div",{staticClass:"table-box"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading2,expression:"tableLoading2"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{id:"table",height:"100%",data:e.cameraData,"tooltip-effect":"dark",border:""}},[t("el-table-column",{attrs:{prop:"indexID",label:"序号",width:"80",align:"center"}}),e._v(" "),e.showIndex?t("el-table-column",{attrs:{prop:"id"}}):e._e(),e._v(" "),t("el-table-column",{attrs:{prop:"placeName",label:"所属楼宇",align:"center","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{prop:"channelName",label:"全部通道",width:"150",filters:e.cameraFiltersData,"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.channelName?a.row.channelName:""))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"cameraDirect",label:"拍照方向",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.dicFmtMap.cameraDirectcn?a.row.dicFmtMap.cameraDirectcn:""))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"cameraIp",label:"摄像头IP",align:"center","show-overflow-tooltip":""}}),e._v(" "),t("el-table-column",{attrs:{prop:"cameraPhoto",label:"抓拍事项",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.dicFmtMap.cameraPhotocn?a.row.dicFmtMap.cameraPhotocn:""))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.roleActions.indexOf("设备与场所_@bepf@devPlace@updateCameraList_update_own")>-1?t("el-button",{staticClass:"normal",attrs:{size:"mini",plain:""},on:{click:function(t){return e.editCamera(a.row)}}},[e._v("修改")]):e._e(),e._v(" "),e.roleActions.indexOf("设备与场所_@bepf@devPlace@updateCameraList_update_own")>-1?t("el-button",{staticClass:"warning",attrs:{size:"mini",plain:""},on:{click:function(t){return e.deleteCamera(a.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1),e._v(" "),t("el-dialog",{staticClass:"sch-system-dialog camara-dialog",attrs:{title:"通道与摄像头",visible:e.addCameraDialog,width:"750px",center:""},on:{"update:visible":function(a){e.addCameraDialog=a}}},[t("div",{staticClass:"content"},[t("el-form",{ref:"aisleCameraForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.aisleCameraForm,rules:e.aisleCameraFormRules,"label-width":"95px"}},[t("el-form-item",{attrs:{label:"所属楼宇：",prop:"placeId"}},[t("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择楼宇"},on:{change:e.caremaSelectBuild},model:{value:e.aisleCameraForm.placeId,callback:function(a){e.$set(e.aisleCameraForm,"placeId",a)},expression:"aisleCameraForm.placeId"}},e._l(e.buildingData,function(e,a){return t("el-option",{key:a,attrs:{label:e.placeName,value:e.placeId}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"通道名称：",prop:"channelId"}},[t("el-select",{attrs:{placeholder:"请选择通道名称"},on:{change:e.caremaSelectChannel},model:{value:e.aisleCameraForm.channelId,callback:function(a){e.$set(e.aisleCameraForm,"channelId",a)},expression:"aisleCameraForm.channelId"}},e._l(e.allAisleData,function(e,a){return t("el-option",{key:a,attrs:{label:e.channelName,value:e.channelId}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"关联方向：",prop:"cameraDirect"}},[t("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择关联方向"},model:{value:e.aisleCameraForm.cameraDirect,callback:function(a){e.$set(e.aisleCameraForm,"cameraDirect",a)},expression:"aisleCameraForm.cameraDirect"}},e._l(e.cameraSideData,function(e,a){return t("el-option",{key:a,attrs:{label:e.cameraDirectValue,value:e.cameraDirect}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:" "}}),e._v(" "),t("el-form-item",{attrs:{label:"摄像头类型：",prop:"cameraType"}},[t("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择摄像头类型"},model:{value:e.aisleCameraForm.cameraType,callback:function(a){e.$set(e.aisleCameraForm,"cameraType",a)},expression:"aisleCameraForm.cameraType"}},e._l(e.cameraTypeData,function(e,a){return t("el-option",{key:a,attrs:{label:e.cameraTypeValue,value:e.cameraType}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"摄像头IP：",prop:"cameraIp"}},[t("el-input",{attrs:{placeholder:"请输入摄像头IP"},model:{value:e.aisleCameraForm.cameraIp,callback:function(a){e.$set(e.aisleCameraForm,"cameraIp",a)},expression:"aisleCameraForm.cameraIp"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"用户名：",prop:"cameraUser"}},[t("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入用户名"},model:{value:e.aisleCameraForm.cameraUser,callback:function(a){e.$set(e.aisleCameraForm,"cameraUser",a)},expression:"aisleCameraForm.cameraUser"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码：",prop:"cameraPwd"}},[t("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.aisleCameraForm.cameraPwd,callback:function(a){e.$set(e.aisleCameraForm,"cameraPwd",a)},expression:"aisleCameraForm.cameraPwd"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"抓拍类型：",prop:"cameraPhoto"}},[t("el-checkbox-group",{model:{value:e.aisleCameraForm.cameraPhoto,callback:function(a){e.$set(e.aisleCameraForm,"cameraPhoto",a)},expression:"aisleCameraForm.cameraPhoto"}},e._l(e.photographType,function(a,i){return t("el-checkbox",{key:i,attrs:{label:a.id}},[e._v(e._s(a.name))])}),1)],1)],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{title:"取消",btnClass:"custom7",btnFontSize:"12px",btnHeight:"4.5vh"},on:{click:function(a){e.addCameraDialog=!1}}}),e._v(" "),t("Button",{attrs:{title:"保存",btnClass:"custom8",btnFontSize:"12px",btnHeight:"4.5vh"},on:{click:e.saveCameraForm}})],1)])],1),e._v(" "),e.isToast?t("Toast",{attrs:{"modal-title":e.toast,duration:"1500"},on:{toastCancel:e.hideToast}}):e._e()],1)},h=[],p={render:u,staticRenderFns:h},g=p,f=t("VU/8"),b=i,D=f(v,g,!1,b,"data-v-1acf8c74",null);a.default=D.exports},g7xD:function(e,a,t){var i=t("DWxy");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t("rjj0")("1bd29bbd",i,!0,{})}});