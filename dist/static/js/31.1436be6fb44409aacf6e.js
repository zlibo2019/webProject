webpackJsonp([31],{CFS4:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.student-leave-record[data-v-79007f39] {\n  width: 100%;\n  height: 100%;\n  margin: 0 auto;\n}\n.student-leave-record .turn-top[data-v-79007f39] {\n    width: 100%;\n    height: auto;\n    background: #fff;\n    margin-bottom: 15px;\n    padding: 0 35px;\n}\n.student-leave-record .turn-top .turn-box[data-v-79007f39] {\n      width: 100%;\n      height: 50px;\n      border-bottom: 1px solid #E1E1E1;\n      line-height: 50px;\n      font-size: 12px;\n      color: #333;\n}\n.student-leave-record .turn-top .turn-box span[data-v-79007f39] {\n        margin: 0 20px;\n        margin-left: 0;\n}\n.student-leave-record .turn-top .turn-box button[data-v-79007f39] {\n        color: #AAAAAA;\n}\n.student-leave-record .turn-top .turn-box button.on[data-v-79007f39] {\n        color: #333;\n}\n.student-leave-record .turn-top .turn-box[data-v-79007f39] .el-date-editor {\n        margin: 0 20px;\n}\n.student-leave-record .turn-top .turn-box[data-v-79007f39] .el-date-editor span {\n          margin: 0;\n}\n.student-leave-record .turn-top .turn-box[data-v-79007f39] .el-date-editor input:focus {\n          border: 0 !important;\n}\n.student-leave-record .turn-top .turn-box .el-select .el-input input[data-v-79007f39] {\n        height: 40px !important;\n}\n.student-leave-record .turn-top .turn-box .el-select .el-input span[data-v-79007f39] {\n        margin: 0;\n}\n.student-leave-record .turn-top .turn-box .transfer-content[data-v-79007f39] {\n        height: auto !important;\n        min-height: 0 !important;\n        text-align: center;\n        display: inline-block !important;\n        position: relative;\n        margin-left: 20px;\n        vertical-align: middle;\n}\n.student-leave-record .turn-top .turn-box .transfer-content .transfer-top[data-v-79007f39] {\n          width: 123px;\n          height: 40px;\n          line-height: 40px;\n          position: relative;\n          margin-bottom: 3px;\n          padding-left: 15px;\n          border-radius: 5px;\n          border: 1px solid #E5E5E5;\n          text-align: left;\n          cursor: pointer;\n          background: #fff;\n}\n.student-leave-record .turn-top .turn-box .transfer-content .transfer-top span[data-v-79007f39] {\n            font-size: 12px;\n            display: inline-block;\n            width: 75px;\n            overflow: hidden;\n            white-space: nowrap;\n}\n.student-leave-record .turn-top .turn-box .transfer-content .transfer-top img[data-v-79007f39] {\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            right: 12px;\n            margin: auto;\n            -webkit-transition: 0.3s;\n            transition: 0.3s;\n            width: 12px;\n}\n.student-leave-record .turn-top .turn-box .transfer-content .transfer-top .arrow-up[data-v-79007f39] {\n            -webkit-transform: rotate(-180deg);\n            transform: rotate(-180deg);\n}\n.student-leave-record .turn-top .turn-box .transfer-content .inner-tree[data-v-79007f39] {\n          width: 150px;\n          width: auto;\n          min-width: 123px;\n          height: auto;\n          max-height: 250px;\n          overflow-y: auto;\n          padding: 15px 10px;\n          background: #fff;\n          position: absolute;\n          top: 50px;\n          left: 0px;\n          z-index: 20;\n          border: 1px solid #E1E1E1;\n          border-radius: 5px;\n          -webkit-box-sizing: content-box;\n          box-sizing: content-box;\n}\n.student-leave-record .turn-top .turn-box[data-v-79007f39]:last-child {\n        border: 0;\n}\n.student-leave-record .turn-bottom[data-v-79007f39] {\n    width: 100%;\n    height: auto;\n    background: #fff;\n}\n.student-leave-record .turn-bottom .operate-box[data-v-79007f39] {\n      width: 100%;\n      height: 60px;\n      line-height: 60px;\n      -webkit-box-sizing: content-box;\n              box-sizing: content-box;\n      border-bottom: 1px solid #e1e1e1;\n}\n.student-leave-record .turn-bottom .operate-box span[data-v-79007f39] {\n        font-size: 18px;\n        font-weight: bold;\n        color: #333;\n        margin-left: 35px;\n}\n.student-leave-record .turn-bottom .operate-box .exportBtn[data-v-79007f39] {\n        width: 90px;\n        margin: 5px 20px;\n        background: #F5F6F5 !important;\n        border: 1px solid #E6E6E6 !important;\n        color: #333;\n}\n.student-leave-record .turn-bottom .operate-box .exportBtn[data-v-79007f39]:hover {\n        background: #1cab7d !important;\n        color: #fff !important;\n}\n.student-leave-record .turn-bottom .operate-box .search-box[data-v-79007f39] {\n        width: 200px;\n        height: 36px;\n        float: right;\n        margin: 0px 80px 0px 20px;\n        margin-right: 10px;\n        background: #fff;\n        position: relative;\n}\n.student-leave-record .turn-bottom .operate-box .search-box .el-input i[data-v-79007f39] {\n          cursor: pointer;\n}\n.student-leave-record .turn-bottom .operate-box #exportForm[data-v-79007f39] {\n        display: none;\n}\n.student-leave-record .turn-bottom .table-box .el-table[data-v-79007f39] {\n      border-left: 0;\n      border-right: 0;\n}\n.student-leave-record .turn-bottom .pagination-box[data-v-79007f39] {\n      width: 100%;\n      height: 60px;\n      background: #fff;\n      -webkit-box-sizing: content-box;\n              box-sizing: content-box;\n}\n.student-leave-record .turn-bottom .pagination-box .el-pagination[data-v-79007f39] {\n        padding-top: 15px;\n}\n.el-popover[data-v-79007f39] {\n  padding: 15px 50px 16px !important;\n}\n.el-popover > img[data-v-79007f39] {\n    width: auto !important;\n    margin: 5px 10px;\n}\n",""])},TxfI:function(t,e,a){"use strict";function n(t){a("nLfe")}Object.defineProperty(e,"__esModule",{value:!0});var o=a("bOdI"),r=a.n(o),i=a("bWJ8"),l=a("qqG0"),s={name:"HelloWorld",components:{Button:i.a,Toast:l.a},computed:{defaultErrImg:function(){return'this.src="'+this.$store.state.Common.defaultErrImg+'"'}},data:function(){var t;return t={daterange:[],mySearch:"",tableData:[{student_number:"2014",student_name:"花样年华",student_grade:"马戏班",check_type:"请假",leave_time:"2018-06-08 08:18-2018-06-10 08:00",leave_type:"事假",approval_status:"同意",leave_school_time:"2018-06-08 08:20",back_school_time:"——",stateName:"已同意（撤销被拒绝）",leaveFile:"15349888780.f95fi5a9baf7.jpg,15349885350.118830e652g97.jpg"},{student_number:"2014",student_name:"花样年华",student_grade:"马戏班",check_type:"请假",leave_time:"2018-06-08 08:18-2018-06-10 08:00",leave_type:"事假",approval_status:"同意",leave_school_time:"2018-06-08 08:20",back_school_time:"——"},{student_number:"2014",student_name:"花样年华",student_grade:"马戏班",check_type:"请假",leave_time:"2018-06-08 08:18-2018-06-10 08:00",leave_type:"事假",approval_status:"同意",leave_school_time:"2018-06-08 08:20",back_school_time:"——"}]},r()(t,"tableData",[]),r()(t,"leaveStateData",[{leaveState:1,leaveStateValue:"未审批"},{leaveState:2,leaveStateValue:"已同意"},{leaveState:3,leaveStateValue:"已拒绝"},{leaveState:4,leaveStateValue:"已撤销"},{leaveState:0,leaveStateValue:"全部"}]),r()(t,"leaveStateData",[]),r()(t,"onState",100),r()(t,"onTime",1),r()(t,"onAll",1),r()(t,"deparment",""),r()(t,"depId",""),r()(t,"transferState",!1),r()(t,"treeData",[{id:10003,pid:10001,label:"班级",lv:2,group:102,isLeaf:0,children:[{id:10009,pid:10003,label:"高中部",lv:3,group:103,isLeaf:0,children:[{id:10013,pid:10009,label:"高三",lv:4,group:104,isLeaf:1,children:[]},{id:10011,pid:10009,label:"高一",lv:4,group:104,isLeaf:0,children:[{id:10014,pid:10011,label:"一班",lv:5,group:105,isLeaf:1,children:[]},{id:100017,pid:10011,label:"二班",lv:5,group:105,isLeaf:1,children:[]}]},{id:10012,pid:10009,label:"高二",lv:4,group:104,isLeaf:1,children:[]}]},{id:10010,pid:10003,label:"初中部",lv:3,group:103,isLeaf:1,children:[]}]}]),r()(t,"treeData",[]),r()(t,"defaultProps",{children:"children",label:"label"}),r()(t,"depExpandedKeys",[]),r()(t,"showIndex",!1),r()(t,"allNum",0),r()(t,"currentPage",1),r()(t,"tableLoading",!1),r()(t,"pageItem",20),r()(t,"isToast",!1),r()(t,"toast",""),t},methods:{search:function(){this.getTableData()},exportExcel:function(){$("#exportForm").submit()},depChangeClick:function(){var t=this;this.transferState=!this.transferState,this.depExpandedKeys=[],this.classExpandedKeys=[],this.treeData.length>0&&this.treeData.forEach(function(e){t.depExpandedKeys.push(e.id)})},selectDeparment:function(t){if(105==t.group){var e=this.getClassName(this.treeData,t.id);this.deparment=e,this.depId=t.id,this.onAll="",this.getTableData()}else this.$message({showClose:!0,message:"请选择班级",type:"warning",duration:this.msgDuration});this.transferState=!1},getClassName:function(t,e,a){function n(t,e){for(var l=0;l<t.length;l++)if(t[l].children instanceof Array)if(t[l].children.length>0){for(var s=0;s<t[l].children.length;s++)0==t[l].children[s].children.length&&t[l].children[s].id==e&&104==t[l].group&&(i=t[l].label);n(t[l].children,e)}else t[l].id==e&&105==t[l].group&&(o=t[l].label,a&&(r.oneNameId=t[l].id));return-1}var o="",r=this,i="";return n(t,e),o=i+" "+o},selectLeaveState:function(t){this.onState=t.leaveState,this.getTableData()},selectAll:function(t){this.onAll=1,this.deparment="",this.getTableData()},selectToday:function(t){this.onTime=1,this.daterange=[],this.getTableData()},changeDateRange:function(t){this.onTime="",this.getTableData()},getTableData:function(){var t=this;$.each(this.tableData,function(e,a){t.$set(t.tableData[e],"indexID",(t.currentPage-1)*t.tableData.length+e+1)});var e=void 0;if(1==this.onTime){var a=(new Date).getFullYear(),n=(new Date).getMonth()+1;n=n<10?"0"+n:n;var o=(new Date).getDate();o=o<10?"0"+o:o;var r=(new Date).getHours();r=r<10?"0"+r:r;var i=(new Date).getMinutes();i=i<10?"0"+i:i;var l=(new Date).getSeconds();l=l<10?"0"+l:l;e=[a+"-"+n+"-"+o+" 00:00:00",a+"-"+n+"-"+o+" 23:59:59"]}else e=this.daterange;var s={count:!0,page_index:this.currentPage,page_size:this.pageItem,leaveState:this.onState,beginDate:e[0],endDate:e[1],depStr:1==this.onAll?parseInt(""):this.depId,userNameLike:this.mySearch};this.tableLoading=!0,this.$api.DataCount.studentLeaveRecord(s).then(function(e){t.tableLoading=!1,600==e.data.code||0==e.data.code?(null!=e.data.data?t.allNum=e.data.data.total_record:t.allNum=0,t.tableData=e.data.data.records,$.each(t.tableData,function(e,a){t.$set(t.tableData[e],"indexID",(t.currentPage-1)*t.pageItem+e+1)})):(t.allNum=0,t.isToast=!0,t.toast=e.data.msg)}).catch(function(e){t.tableLoading=!1})},loadStructure:function(){var t=this,e={schoolId:localStorage.getItem("schoolId")};this.$api.Common.getTreeListStudent(e).then(function(e){600==e.data.code?t.treeData=e.data.data:(t.isToast=!0,t.toast=e.data.msg)})},getStateData:function(){var t=this;this.$api.DataCount.getLeaveState().then(function(e){600==e.data.code||0==e.data.code?t.leaveStateData=e.data.data:(t.isToast=!0,t.toast=e.data.msg)})},handleSelectionChange:function(t){this.multipleSelection=t},toggleSelection:function(t){this.$refs.multipleTable.toggleRowSelection(t)},handleSizeChange:function(t){this.pageItem=t,this.currentPage=1,this.changePage(this.pageItem,this.currentPage)},handleCurrentChange:function(t){this.currentPage=t,this.getTableData()},hideToast:function(){this.isToast=!1}},mounted:function(){setTimeout(function(){var t=$(".index > .m-cen").height(),e=$(".turn-top").height(),a=$(".operate-box").height(),n=$(".pagination-box").height(),o=t-e-a-n-15;$(".table-box").height(o)},5);var t=this;document.body.onclick=function(e){0==$(e.target).closest(".deparment").length&&(t.transferState=!1)},this.getTableData(),this.getStateData(),this.loadStructure()}},d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"student-leave-record"},[n("div",{staticClass:"turn-top"},[n("div",{staticClass:"turn-box"},[n("span",[t._v("请假状态：")]),t._v(" "),t._l(t.leaveStateData,function(e,a){return n("el-button",{key:a,class:{on:t.onState==e.leaveState},attrs:{type:"text"},on:{click:function(a){return t.selectLeaveState(e)}}},[t._v(t._s(e.leaveStateValue))])})],2),t._v(" "),n("div",{staticClass:"turn-box"},[n("span",[t._v("时间范围：")]),t._v(" "),n("el-button",{class:{on:1==t.onTime},attrs:{type:"text"},on:{click:t.selectToday}},[t._v("今天")]),t._v(" "),n("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"]},on:{change:t.changeDateRange},model:{value:t.daterange,callback:function(e){t.daterange=e},expression:"daterange"}})],1),t._v(" "),n("div",{staticClass:"turn-box"},[n("span",[t._v("学生范围：")]),t._v(" "),n("el-button",{class:{on:1==t.onAll},attrs:{type:"text"},on:{click:t.selectAll}},[t._v("全部")]),t._v(" "),n("div",{staticClass:"deparment transfer-content"},[n("div",{staticClass:"transfer-top",on:{click:t.depChangeClick}},[n("span",[t._v(t._s(t.deparment))]),t._v(" "),n("img",{class:{"arrow-up":t.transferState},attrs:{src:a("0+L1"),alt:""}})]),t._v(" "),t.transferState?n("div",{staticClass:"inner-tree"},[n("el-tree",{attrs:{data:t.treeData,props:t.defaultProps,"node-key":"id","default-expanded-keys":t.depExpandedKeys,"expand-on-click-node":!1},on:{"node-click":t.selectDeparment}})],1):t._e()])],1)]),t._v(" "),n("div",{staticClass:"turn-bottom"},[n("div",{staticClass:"operate-box"},[n("span",[t._v(t._s(t.allNum)+"条请假记录")]),t._v(" "),n("iframe",{staticStyle:{display:"none"},attrs:{id:"id_iframe",name:"id_iframe"}}),t._v(" "),n("div",{staticClass:"search-box"},[n("el-input",{attrs:{size:"small",placeholder:"请输入姓名或者学/工号"},on:{change:t.search},model:{value:t.mySearch,callback:function(e){t.mySearch=e},expression:"mySearch"}},[n("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:t.search},slot:"suffix"})])],1)]),t._v(" "),n("div",{staticClass:"table-box"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{id:"table",height:"100%",data:t.tableData,border:"","highlight-current-row":""},on:{"row-click":t.toggleSelection,"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{prop:"indexID",label:"序号",width:"65"}}),t._v(" "),n("el-table-column",{attrs:{prop:"studentName",label:"姓名",align:"center","column-key":"student_name","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"userNo",label:"学号",align:"center","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"className",label:"班级",align:"center","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"beginTime","min-width":"110",label:"请假开始时间",align:"center","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"endTime","min-width":"110",label:"请假结束时间",align:"center","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"leaveReason",label:"请假原因",align:"center","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"leaveFile",label:"照片"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.leaveFile?n("el-popover",{attrs:{trigger:"hover",placement:"bottom"}},[t._l(e.row.leaveFile.split(","),function(e,a){return n("img",{key:a,staticStyle:{width:"auto"},attrs:{src:t.uploadPicUrl+e+"?imageView2/1/w/200/h/260",onerror:t.defaultErrImg}})}),t._v(" "),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("el-tag",{staticStyle:{background:"none",color:"#1cab7d",border:"none"},attrs:{size:"medium"}},[t._v("预览")])],1)],2):n("span",[t._v("无")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"stateName",label:"请假状态",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"flowUserName",label:"审批人",align:"center","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"flowTime",label:"审批时间",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.flowTime?n("span",[t._v(t._s(e.row.flowTime))]):n("span",[t._v("——")])]}}])})],1)],1),t._v(" "),n("div",{staticClass:"pagination-box"},[n("el-pagination",{attrs:{background:"",layout:" prev, pager, next",total:t.allNum,"page-size":t.pageItem,"current-page":t.currentPage},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleCurrentChange}})],1)]),t._v(" "),t.isToast?n("Toast",{attrs:{"modal-title":t.toast,duration:"1000"},on:{toastCancel:t.hideToast}}):t._e()],1)},c=[],p={render:d,staticRenderFns:c},u=p,h=a("VU/8"),g=n,v=h(s,u,!1,g,"data-v-79007f39",null);e.default=v.exports},nLfe:function(t,e,a){var n=a("CFS4");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("7761211e",n,!0,{})}});