webpackJsonp([10],{RCjY:function(t,o,e){o=t.exports=e("FZ+f")(!1),o.push([t.i,"\n.radio-wrap[data-v-a81a3788] {\n  width: 100%;\n  height: 0.4rem;\n  line-height: 0.4rem;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: relative;\n}\n.radio-wrap .radio-modal[data-v-a81a3788] {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    background-color: transparent;\n    z-index: 10;\n    cursor: no-drop;\n}\n.radio-wrap .radio-inner[data-v-a81a3788] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    width: 30%;\n    position: relative;\n    min-width: 0.5rem;\n    /*&:hover .round span{*/\n    /*background-color: #409EFF !important;*/\n    /*}*/\n}\n.radio-wrap .radio-inner img[data-v-a81a3788] {\n      width: 0.2rem;\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0.1rem;\n      margin: auto;\n}\n.radio-wrap .radio-inner .round[data-v-a81a3788] {\n      width: 0.2rem;\n      height: 0.2rem;\n      border-radius: 50%;\n      border: 1px solid #eaeaea;\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0.1rem;\n      margin: auto;\n}\n.radio-wrap .radio-inner .round[data-v-a81a3788]:hover {\n        border: 1px solid #409EFF !important;\n}\n.radio-wrap .radio-inner .round span[data-v-a81a3788] {\n        width: 0.1rem;\n        height: 0.1rem;\n        border-radius: 50%;\n        background-color: #eaeaea;\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        margin: auto;\n}\n.radio-wrap .radio-inner .yes-round[data-v-a81a3788] {\n      border: 1px solid #409EFF !important;\n}\n.radio-wrap .radio-inner .yes-round span[data-v-a81a3788] {\n        background-color: #409EFF !important;\n}\n.radio-wrap .radio-inner p[data-v-a81a3788] {\n      font-size: 0.15rem;\n      text-align: left;\n      padding-left: 0.35rem;\n}\n",""])},RpG4:function(t,o,e){var a=e("RCjY");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("4a6f980d",a,!0,{})},"Vs+C":function(t,o,e){o=t.exports=e("FZ+f")(!1),o.push([t.i,"\n@charset \"UTF-8\";\n.school-record[data-v-fcf35792] {\n  width: 100%;\n  height: 100%;\n}\n.school-record .normal[data-v-fcf35792], .school-record .start-edit[data-v-fcf35792] {\n    width: 100%;\n    height: 100%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.school-record .m-top[data-v-fcf35792] {\n    -ms-flex-preferred-size: 8vh;\n        flex-basis: 8vh;\n    line-height: 8vh;\n    border-bottom: 1px solid #E1E1E1;\n    padding-left: 3%;\n    font-size: 18px;\n    position: relative;\n}\n.school-record .m-top .t-right[data-v-fcf35792] {\n      height: 100%;\n      width: 50%;\n      float: right;\n      text-align: right;\n      overflow: hidden;\n}\n.school-record .m-top .t-right .button-div[data-v-fcf35792] {\n        /*position: absolute;*/\n        margin-right: 3%;\n}\n.school-record .m-bom[data-v-fcf35792] {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    text-align: center;\n}\n.school-record .m-bom .not-regist[data-v-fcf35792] {\n      padding-top: 10%;\n}\n.school-record .m-bom .not-regist .title[data-v-fcf35792] {\n        color: #323232;\n        font-size: 3.2vh;\n        font-weight: bold;\n        margin-bottom: 5vh;\n}\n.school-record .m-bom .regist-edit[data-v-fcf35792] {\n      padding-top: 3%;\n}\n.school-record .m-bom .regist-edit .img-div[data-v-fcf35792] {\n        width: 11.7vh;\n        height: 11.7vh;\n        display: inline-block;\n        margin-bottom: 35px;\n}\n.school-record .m-bom .regist-edit .img-div img[data-v-fcf35792] {\n          width: 100%;\n          height: 100%;\n          border-radius: 50%;\n}\n.school-record .m-bom .regist-edit .title[data-v-fcf35792] {\n        color: #323232;\n        font-size: 3.2vh;\n        font-weight: bold;\n}\n.school-record .m-bom .regist-edit .edit li[data-v-fcf35792] {\n        margin-bottom: 20px;\n        padding-top: 35px;\n}\n.school-record .m-bom .regist-edit .edit li > div[data-v-fcf35792] {\n          line-height: 35px;\n          font-size: 16px;\n}\n.school-record .m-bom .regist-edit .edit li .content span[data-v-fcf35792] {\n          padding-bottom: 35px;\n          border-bottom: 1px dashed #E1E1E1;\n}\n.school-record .m-bom .regist-edit .edit li:last-child .content span[data-v-fcf35792] {\n          border-bottom: 0;\n}\n.school-record .start-edit .m-bom[data-v-fcf35792] {\n    overflow: auto;\n    background: #F5F6F5;\n}\n.school-record .start-edit .m-bom .el-form[data-v-fcf35792] {\n      padding-top: 5%;\n      /*display: inline-block;*/\n      text-align: left;\n      padding-left: 35%;\n}\n.school-record .start-edit .m-bom .el-form .upfile-img[data-v-fcf35792] {\n        width: 15vh;\n        height: 15vh;\n        /*margin: 0 auto;*/\n        text-align: center;\n        color: #ADACAC;\n        background: #e1e1e1;\n        overflow: hidden;\n        position: relative;\n        cursor: pointer;\n}\n.school-record .start-edit .m-bom .el-form .upfile-img span[data-v-fcf35792] {\n          line-height: 15vh;\n          font-size: 3vh;\n          font-weight: bold;\n}\n.school-record .start-edit .m-bom .el-form .upfile-img .load-img[data-v-fcf35792] {\n          width: 100%;\n          height: 100%;\n          position: absolute;\n          top: 0;\n          left: 0;\n}\n.school-record .start-edit .m-bom .el-form .upfile-img .hover-img[data-v-fcf35792] {\n          width: 100%;\n          height: 100%;\n          background: rgba(225, 225, 225, 0.1);\n          background: rgba(0, 0, 0, 0.1);\n          position: absolute;\n          top: 0;\n          left: 0;\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          -webkit-box-pack: center;\n              -ms-flex-pack: center;\n                  justify-content: center;\n          opacity: 0;\n          -webkit-transform: scale(2.6);\n          transform: scale(2.6);\n          -webkit-transition: all .5s ease-in-out;\n          transition: all .5s ease-in-out;\n}\n.school-record .start-edit .m-bom .el-form .upfile-img .hover-img img[data-v-fcf35792] {\n            width: 6.8vh;\n            height: 6vh;\n            margin: auto;\n}\n.school-record .start-edit .m-bom .el-form .upfile-img input[data-v-fcf35792] {\n          opacity: 0;\n}\n.school-record .start-edit .m-bom .el-form .upfile-img[data-v-fcf35792]:hover {\n          background: #B4B4B4;\n}\n.school-record .start-edit .m-bom .el-form .upfile-img:hover .hover-img[data-v-fcf35792] {\n            opacity: 1;\n            transform: scale(1);\n            -webkit-transform: scale(1);\n            transform: scale(1);\n            -webkit-transform: scale(1);\n            -moz-transform: scale(1);\n            -ms-transform: scale(1);\n}\n.school-record .start-edit .m-bom .el-form .el-form-item[data-v-fcf35792] {\n        font-size: 12px;\n}\n.school-record .start-edit .m-bom .el-form .el-form-item[data-v-fcf35792]:nth-of-type(1) .el-form-item__content {\n          text-align: left;\n          padding-left: 8%;\n}\n.school-record .start-edit .m-bom .el-form .el-form-item:nth-of-type(2) span[data-v-fcf35792] {\n          font-size: 12px;\n          padding-left: 20px;\n          color: #BCBCBC;\n}\n.school-record .start-edit .m-bom .el-form .el-form-item:nth-of-type(3) .system-content[data-v-fcf35792] {\n          font-size: 12px;\n          color: #333;\n          margin-right: 10px;\n}\n.school-record .start-edit .m-bom .el-form .el-form-item[data-v-fcf35792]:nth-of-type(4) {\n          white-space: nowrap;\n}\n.school-record .start-edit .m-bom .el-form .el-form-item:nth-of-type(4) .radio-wrap[data-v-fcf35792] {\n            height: 40px;\n            line-height: 40px;\n            /*/deep/  .title{\t\t\t//此方法已验证 可以\n\n                            }*/\n}\n.school-record .start-edit .m-bom .el-form .el-form-item:nth-of-type(4) .radio-wrap[data-v-fcf35792] .radio-inner .round {\n              width: 16px;\n              height: 16px;\n              border: 1px solid #E1E1E1;\n}\n.school-record .start-edit .m-bom .el-form .el-form-item:nth-of-type(4) .radio-wrap[data-v-fcf35792] .radio-inner .round span {\n                width: 6px;\n                height: 6px;\n                background: transparent;\n}\n.school-record .start-edit .m-bom .el-form .el-form-item:nth-of-type(4) .radio-wrap[data-v-fcf35792] .radio-inner .round:hover {\n                border: 1px solid #1cab7d !important;\n}\n.school-record .start-edit .m-bom .el-form .el-form-item:nth-of-type(4) .radio-wrap[data-v-fcf35792] .radio-inner .yes-round {\n              border: 1px solid #1cab7d !important;\n              background: #1cab7d;\n}\n.school-record .start-edit .m-bom .el-form .el-form-item:nth-of-type(4) .radio-wrap[data-v-fcf35792] .radio-inner .yes-round span {\n                background: #fff !important;\n}\n.school-record .start-edit .m-bom .el-form .el-form-item:nth-of-type(4) .radio-wrap[data-v-fcf35792] .radio-inner p {\n              padding-left: 30px;\n}\n.school-record .start-edit .m-bom .el-form .el-form-item[data-v-fcf35792]:nth-of-type(4) .el-radio-group .sel-year {\n            margin-right: 15px;\n}\n.school-record .start-edit .m-bom .el-form .el-form-item[data-v-fcf35792]:nth-of-type(4) .el-radio-group .group-span {\n            margin-left: 15px;\n}\n.school-record .start-edit .m-bom .el-form .el-form-item[data-v-fcf35792]:nth-of-type(4) .el-radio-group .el-radio:first-child {\n            display: inline-block;\n}\n.school-record .start-edit .m-bom .el-form .el-form-item[data-v-fcf35792] .el-radio-group .el-radio {\n          display: block;\n          line-height: 40px;\n          margin-left: 0;\n}\n.school-record .start-edit[data-v-fcf35792] .el-radio-group span {\n    font-size: 12px;\n}\n.school-record .start-edit[data-v-fcf35792] .el-radio-group .el-radio__label {\n    color: #333;\n}\n.school-record .start-edit[data-v-fcf35792] .el-radio-group .el-radio__input, .school-record .start-edit[data-v-fcf35792] .el-radio-group .el-radio__inner {\n    width: 16px;\n    height: 16px;\n}\n.school-record .start-edit[data-v-fcf35792] .el-radio-group .el-radio__inner:hover {\n    border: 1px solid #1cab7d;\n}\n.school-record .start-edit[data-v-fcf35792] .el-radio-group .el-radio__input.is-checked .el-radio__inner {\n    width: 16px;\n    height: 16px;\n    border: 1px solid #1cab7d;\n    background: #1cab7d !important;\n}\n.school-record .start-edit[data-v-fcf35792] .el-radio-group .el-radio__input.is-checked .el-radio__inner:after {\n      width: 6px;\n      height: 6px;\n}\n.school-record .start-edit[data-v-fcf35792] .el-checkbox span {\n    font-size: 12px;\n}\n.school-record .start-edit[data-v-fcf35792] .el-checkbox .el-checkbox__inner:hover {\n    border: 1px solid #1cab7d;\n}\n.school-record .start-edit[data-v-fcf35792] .el-checkbox .el-checkbox__input.is-checked .el-checkbox__inner {\n    border: 1px solid #1cab7d;\n    background: #1cab7d;\n}\n.school-record .start-edit[data-v-fcf35792] .el-checkbox .el-checkbox__input.is-focus .el-checkbox__inner {\n    border: 1px solid #1cab7d;\n}\n.school-record .start-edit[data-v-fcf35792] .el-checkbox .el-checkbox__input.is-checked + .el-checkbox__label {\n    color: #333;\n}\n.school-record .start-edit .sch-system-dialog .el-form[data-v-fcf35792] {\n    text-align: center;\n}\n.school-record .start-edit .sch-system-dialog .el-form-item[data-v-fcf35792] {\n    text-align: left;\n    position: relative;\n    padding-left: 2%;\n    padding-right: 3%;\n    margin-bottom: 0 !important;\n}\n.school-record .start-edit .sch-system-dialog .el-form-item[data-v-fcf35792] .el-radio-group .el-radio {\n      display: inline-block;\n}\n.school-record .start-edit .sch-system-dialog .el-form-item[data-v-fcf35792]:after {\n      content: '';\n      width: 1px;\n      height: 40px;\n      position: absolute;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      margin: auto;\n      background: #E1E1E1;\n}\n.school-record .start-edit .sch-system-dialog .el-form-item[data-v-fcf35792]:last-child:after {\n      background: transparent;\n}\n.school-record .start-edit .sch-system-dialog[data-v-fcf35792] .el-radio-group {\n    /*width: 30%;*/\n    line-height: 40px;\n    /*text-align: left;*/\n    position: relative;\n    /*margin-left: 20px;*/\n    /*&:after{\n                    content: '';\n                    position: absolute;\n                    width: 1px;\n                    height: 40px;\n                    right: 0;\n                    top: -15px;\n                    background: #e1e1e1;\n                }\n                &:last-child{\n                    &:after{\n                        background: transparent;\n                    }\n                }*/\n}\n.school-record .start-edit .sch-system-dialog[data-v-fcf35792] .el-radio-group .el-radio {\n      display: inline-block;\n}\n.school-record .start-edit .sch-system-dialog .el-checkbox[data-v-fcf35792] {\n    display: block;\n    /*display: inline-block;*/\n    /*text-align: left;*/\n    /*width: 30%;*/\n    /*line-height: 30px;*/\n    /*margin-left: 20px;*/\n}\n.school-record .start-edit .sch-system-dialog .dialog-footer > span[data-v-fcf35792] {\n    line-height: 30px;\n    display: block;\n    font-size: 12px;\n    color: #333;\n    text-align: left;\n    padding-left: 3%;\n    margin-bottom: 20px;\n}\n.school-record .start-edit .sch-system-dialog .dialog-footer .button-div[data-v-fcf35792] {\n    margin-right: 20px;\n}\n",""])},YMTi:function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAUdJREFUeNqckz1LxEAQhnc3H3Bge61wIFjlN1gpJ4KtoJUIdjZ2tv4AQSzEq2wOzn8gCEJ6KzsrQRAEg3Bgk82X76uzEuNxJg48yWZ35p3J7o5OkkQ1zANDsAr6wIJXcCP8MN0QiMDYGBN5nvc9WVWVKsuSxPjcBY9uzdSCD8FdEARRGIaKAg7f9xXn8F6Bzz3YblawBccJHbXWap6xEmttgeEauGUFC+CMmf4K/izZGIUq+X8XIKTAHoL7XGhr8mtLGG4waljfsLYmCTf5HLQp/dfxfcUsUqCn/m89CjzznLuaxDxRIObRdDWJiSkwyvPcds1eFMUUwysj1/I0y7LWAkjI1zF4c4d/BMVriszbD5ZNH/he4vOk3gu8mutYOEjT9J0Z3L64RuIcrvAUPjvSUDO7kTYA+9LOy9LOD9LK5+Cl7vwhwAAIfob7IOx1gwAAAABJRU5ErkJggg=="},c0xj:function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAbVJREFUeNqMUz9Lw0AcvUva2GLJkFDHQkXoIHVwcBUEoSDopuAmgpOTH8Mv4OjkB3By6FScdVNaEBVBK9hCbEqr+Xe+X5qkF63aBy93l7v3cvn94UIIJqPb7aoYauA6WAQd8A2sm6ZZZ9/AZQOIqxjONE2rZrNZxjkP3wdBwFzXJTaw3IPRQyIiA2Kn0zkCP4fDofgNg8FA4IwN7sa6WLzT6/WE53niP+AWZOKBa6TlmBRwkXtd14t07WngOA6zbfsO08UMHvu5XC4ldjxE7MZlzXbAVIRhqaSy1UqGqcpoHzEiLsBogwxq9ELG+bXLbl/8ZH3Z8mAqWK06/ghpYLBJnmVFUZKN/odIiWNcPfrMD8brSFOiZz5OV3h9f/J/e/6ISf5HmjwZPFOeYxiznJkF/sOgXFTYjBTjSPNEBg0qEhnbK1rKZE7nbGs5naFI06A0ljFpGoahyb9CaFvIgsJDAxm+7zPLst4xnY8L6bjf74tpQWepcuVKVMEL2virGqkKUUAkPk2VstQPh1TrVPN0GIEKSfOoDyy5D8JSntDOFJODqJ0rUTu3qJ3BE3Tiq3z+S4ABAM6Rno7jexc6AAAAAElFTkSuQmCC"},tzVE:function(t,o,e){t.exports=e.p+"static/img/upfile.7fa81ba.png"},w1XN:function(t,o,e){"use strict";function a(t){e("RpG4")}function s(t){e("ylcE")}Object.defineProperty(o,"__esModule",{value:!0});var i=e("mvHQ"),r=e.n(i),n=e("bOdI"),l=e.n(n),d=e("bWJ8"),c={name:"Radio",props:{data:{type:Array,default:function(){return[]}},yesIcon:{type:String,default:e("c0xj")},noIcon:{type:String,default:e("YMTi")},imgShow:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},data:function(){return{}},created:function(){this.disabled||(this.data[0].checked=!0)},methods:{chooseRadio:function(t){this.data.forEach(function(t){t.checked=!1}),t.checked=!0,this.$emit("choose",t)}}},m=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"radio-wrap"},[t.disabled?e("div",{staticClass:"radio-modal"}):t._e(),t._v(" "),t._l(t.data,function(o,a){return e("div",{staticClass:"radio-inner",on:{click:function(e){return t.chooseRadio(o)}}},[t.imgShow?e("img",{attrs:{src:o.checked?t.yesIcon:t.noIcon}}):e("div",{staticClass:"round",class:{"yes-round":o.checked}},[e("span")]),t._v(" "),e("p",[t._v(t._s(o.title))])])})],2)},h=[],f={render:m,staticRenderFns:h},p=f,g=e("VU/8"),u=a,v=g(c,p,!1,u,"data-v-a81a3788",null),b=(v.exports,e("qqG0")),y=e("zL8q"),x={name:"school-record",components:{Button:d.a,Toast:b.a},data:function(){return l()({isFirstEdit:-1,records:{schooling:"",shifts:""},startEdit:!1,radioData:[{checked:!1,title:"备选项1"},{checked:!1,title:"备选项2"},{checked:!1,title:"备选项3"}],form:{schoolId:"",schoolName:"",schoolSystem:"",gradeFormat:"1",gradeEnd:"",classFormat:"1",schoolLogo:""},rules:{schoolSystem:[{required:!0,message:"请选择学校学制",trigger:"blur"}],gradeFormat:[{required:!0,message:"请选择年级名称格式",trigger:"change"}],classFormat:[{required:!0,message:"请选择班级名称格式",trigger:"change"}]},systemForm:{smaSch:"",midSch:"",hightSch:"",systemSchool:[]},imageUrl:"",imgList:[],loadLogo:"",selYear:"",selYears:"",schSystemDialog:!1,allSystem:"",maxSystem:"",sysBtnDisable:!1,groupDisable1:!1,groupDisable2:!1,groupDisable3:!1,gradeDisable:!1,classDisable:!1,yearDisable:!1,startDateOpt:{disabledDate:function(t){return t.getTime()>Date.now()}},endDateOpt:{disabledDate:function(t){var o=(new Date("2060-12-31").getTime(),new Date("2010-01-01").getTime(),t.getTime());return o>Date.now()}},isImgType:!0,isToast:!1,toast:""},"isToast",!1)},computed:{},methods:{clickEdit:function(){this.startEdit=!0,this.isImgType=!0,this.loadSchoolInfo()},radioGroup:function(t){},changeYear:function(){if(""!=this.maxSystem){var t=this.selYear;if(!t)return this.form.gradeEnd="";this.form.gradeEnd=t.getFullYear();for(var o=[],e=this.form.gradeEnd,a=0;a<this.maxSystem;a++)o.push(e--+"级");this.selYears="（"+o.join("，")+"）"}else this.form.gradeEnd="",this.selYear="",this.$alert("请选择学校学制","提示",{confirmButtonText:"确定"})},selSchoolSys:function(){this.schSystemDialog=!0},selectSystem:function(){this.schSystemDialog=!1,this.splicingSystem()},splicingSystem:function(){var t=[],o=[],e=[];if(""!=this.systemForm.smaSch&&-1!=this.systemForm.systemSchool.indexOf("1")){var a="";"5"==this.systemForm.smaSch?a="五年制":"6"==this.systemForm.smaSch&&(a="六年制"),t.push("小学 "+a),o.push("1,"+this.systemForm.smaSch),e.push(parseInt(this.systemForm.smaSch))}if(""!=this.systemForm.midSch&&-1!=this.systemForm.systemSchool.indexOf("2")){var s="";"3"==this.systemForm.midSch?s="三年制":"4"==this.systemForm.midSch&&(s="四年制"),t.push("初中 "+s),o.push("2,"+this.systemForm.midSch),e.push(parseInt(this.systemForm.midSch))}if(""!=this.systemForm.hightSch&&-1!=this.systemForm.systemSchool.indexOf("3")){var i="";"3"==this.systemForm.hightSch&&(i="三年制"),t.push("高中 "+i),o.push("3,"+this.systemForm.hightSch),e.push(parseInt(this.systemForm.hightSch))}if(this.allSystem=t.join("；"),this.form.schoolSystem=o.join(";"),this.form.systemName=t.join("；"),0==e.length)return void(this.maxSystem="");if(this.maxSystem=Math.max.apply(null,e),this.selYear){for(var r=[],n=this.form.gradeEnd,l=0;l<this.maxSystem;l++)r.push(n--+"级");this.selYears="（"+r.join("，")+"）"}},saveRecord:function(t){var o=this,e=this;this.$refs[t].validate(function(t){if(!t)return 1==o.form.gradeFormat&&""==o.form.gradeEnd&&o.$alert("请选择入学年份","提示",{confirmButtonText:"确定"}),!1;y.Loading.service();var a=JSON.parse(r()(o.form));a.ltUserId=parseInt(localStorage.getItem("userId"));var s="",i=void 0,n=void 0,l=void 0,d=[];$.each(e.form.schoolSystem.split(";"),function(t,o){""!=o&&("1"==o.split(",")[0]?(i="小学 ",n="一年级"):"2"==o.split(",")[0]?(i="初中 ",n="初一"):"3"==o.split(",")[0]&&(i="高中 ",n="高一"),"1"==e.form.gradeFormat?n=e.form.gradeEnd+"级":"2"==e.form.gradeFormat&&("小学"==i?n="一年级":"初中"==i?n="初一":"高中"==i&&(n="高一")),"1"==e.form.classFormat?l="一班":"2"==e.form.classFormat?l="1班":"3"==e.form.classFormat&&(l="(1)班"),s=i+n+l,d.push(s))}),a.demoName=d.join("；"),a.gradeEnd||(a.gradeEnd=""),1==a.gradeFormat&&""==a.gradeEnd&&o.$message({showClose:!0,message:"请选择入学年份",type:"error",duration:o.msgDuration}),o.$api.Common.getQiniuUploadToken({isOverride:1,expireSeconds:3600}).then(function(t){var s="",i=new FormData,r="";if(0!=e.imgList.length)s=Date.parse(new Date)/1e3+Math.random().toString(20)+".jpg",r=e.dataURItoBlob(e.imgList[0].file.src);else if(!e.isImgType)return e.isToast=!0,e.toast="上传校徽格式错误，请重新选择！",void y.Loading.service().close();i.append("token",t.data.data),i.append("file",r),i.append("key",s),o.$api.Common.uploadQiniu(i).then(function(t){""!=t.data.key?a.schoolLogo=t.data.key:a.schoolLogo=e.loadLogo,o.$api.BasicInfo.updateSchoolInfo(a).then(function(t){y.Loading.service().close(),600==t.data.code?(o.form.schoolLogo=o.uploadPicUrl+a.schoolLogo,o.records.schooling=o.allSystem,o.records.shifts=d.join("；"),o.startEdit=!1,o.isFirstEdit=1,localStorage.setItem("classFormat",o.form.classFormat)):(o.isToast=!0,o.toast=t.data.msg)}).catch(function(t){y.Loading.service().close()})})})})},cancelRecord:function(){this.startEdit=!1,this.imgList=[],this.loadSchoolInfo()},clickUpfile:function(){$("#upfile").click()},handleAvatarSuccess:function(t,o){this.imageUrl=URL.createObjectURL(o.raw)},beforeAvatarUpload:function(t){var o="image/jpeg"===t.type,e=t.size/1024/1024<2;return o||this.$message.error("上传头像图片只能是 JPG 格式!"),e||this.$message.error("上传头像图片大小不能超过 2MB!"),o&&e},fileClick:function(){$("#upfile").click()},fileChange:function(t){if(this.imgList=[],!t.target.files[0].size)return void(this.isImgType=!1);this.fileList(t.target),t.target.value=""},fileList:function(t){for(var o=t.files,e=0;e<o.length;e++)""!=o[e].type?this.fileAdd(o[e]):this.folders(t.items[e])},folders:function(t){var o=this;t.kind&&(t=t.webkitGetAsEntry()),t.createReader().readEntries(function(t){for(var e=0;e<t.length;e++)t[e].isFile?o.foldersAdd(t[e]):o.folders(t[e])})},foldersAdd:function(t){var o=this;t.file(function(t){o.fileAdd(t)})},fileAdd:function(t){if(void 0!==this.limit&&this.limit--,!(void 0!==this.limit&&this.limit<0)){if(this.size=this.size+t.size,-1==t.type.indexOf("image"))return this.isImgType=!1,void this.$message({showClose:!0,message:"仅支持jpg、jpeg、png格式，请重新选择！",type:"warning",duration:this.msgDuration});var o=t.name.lastIndexOf("."),e=t.name.substring(o+1).toUpperCase();if("BMP"!=e&&"JPG"!=e&&"JPEG"!=e&&"PNG"!=e)return void this.$message({showClose:!0,message:"仅支持jpg、jpeg、png格式，请重新选择！",type:"warning",duration:this.msgDuration});this.isImgType=!0;var a=new FileReader;a.vue=this,a.readAsDataURL(t),a.onload=function(){t.src=this.result,this.vue.imgList.push({file:t}),this.vue.form.schoolLogo=this.result}}},hideToast:function(){this.isToast=!1},loadSchoolInfo:function(){var t=this,o=this,e=(localStorage.getItem("schoolId"),{schoolId:localStorage.getItem("schoolId")});this.$api.BasicInfo.selectSchoolInfo(e).then(function(e){if(600==e.data.code||0==e.data.code){t.form={schoolId:"",schoolName:"",schoolSystem:"",gradeFormat:"1",gradeEnd:"",classFormat:"1",schoolLogo:""};var a=(e.data.data.schoolName,e.data.data.initFlag),s=e.data.data.schoolSystem;null==s&&(s=""),""==a&&(a=0),t.isFirstEdit=a,1==a&&""!=e.data.data.gradeFormat&&(t.gradeDisable=!0),1==a&&""!=e.data.data.classFormat&&(t.classDisable=!0),1==a&&e.data.data.gradeEnd&&(t.yearDisable=!0),t.form.schoolId=e.data.data.schoolId,t.form.schoolName=e.data.data.schoolName,t.form.schoolSystem=s,t.form.schoolSystemOld=s,t.allSystem=e.data.data.systemName,t.form.gradeFormat=e.data.data.gradeFormat,t.form.classFormat=e.data.data.classFormat,t.form.gradeEnd=e.data.data.gradeEnd,null==e.data.data.gradeEnd&&(e.data.data.gradeEnd=""),t.selYear=e.data.data.gradeEnd.toString(),""==e.data.data.schoolLogo?t.form.schoolLogo="":(t.loadLogo=e.data.data.schoolLogo,t.form.schoolLogo=t.uploadPicUrl+e.data.data.schoolLogo),t.records.schooling=e.data.data.systemName,t.records.shifts=e.data.data.demoName,-1==t.systemForm.systemSchool.indexOf("1")||-1==t.systemForm.systemSchool.indexOf("2")||-1==t.systemForm.systemSchool.indexOf("3")||"5"!=t.systemForm.smaSch&&"6"!=t.systemForm.smaSch||"3"!=t.systemForm.midSch&&"4"!=t.systemForm.midSch||"3"!=t.systemForm.hightSch||(t.sysBtnDisable=!0),-1==t.systemForm.systemSchool.indexOf("1")||"5"!=t.systemForm.smaSch&&"6"!=t.systemForm.smaSch||(t.groupDisable1=!0),-1==t.systemForm.systemSchool.indexOf("2")||"3"!=t.systemForm.midSch&&"4"!=t.systemForm.midSch||(t.groupDisable2=!0),-1!=t.systemForm.systemSchool.indexOf("3")&&"3"==t.systemForm.hightSch&&(t.groupDisable3=!0);var i=[];if($.each(s.split(";"),function(t,e){""!=e&&(o.systemForm.systemSchool[t]=e.split(",")[0],"1"==e.split(",")[0]?o.systemForm.smaSch=e.split(",")[1]:"2"==e.split(",")[0]?o.systemForm.midSch=e.split(",")[1]:"3"==e.split(",")[0]&&(o.systemForm.hightSch=e.split(",")[1]),i.push(parseInt(e.split(",")[1])))}),0==i.length)return void(t.maxSystem="");t.splicingSystem(),t.maxSystem=Math.max.apply(null,i);var r=[];if(!t.form.gradeEnd)return;for(var n=t.form.gradeEnd,l=0;l<t.maxSystem;l++)r.push(n--+"级");t.selYears="（"+r.join("，")+"）"}else t.isToast=!0,t.toast=e.data.msg})}},mounted:function(){this.loadSchoolInfo()}},S=function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",{staticClass:"school-record"},[t.startEdit?t._e():a("div",{staticClass:"normal"},[a("div",{staticClass:"m-top"},[a("span",[t._v("学校档案")]),t._v(" "),a("div",{staticClass:"t-right"},[0!=t.isFirstEdit?a("Button",{attrs:{title:"修改",btnClass:"custom8",btnFontSize:"14px",btnHeight:"4.5vh"},on:{click:t.clickEdit}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"m-bom"},[0==t.isFirstEdit?a("div",{staticClass:"not-regist"},[a("div",{staticClass:"title"},[t._v(t._s(t.form.schoolName))]),t._v(" "),a("div",{staticClass:"edit"},[a("Button",{attrs:{title:"完成学校档案",btnClass:"custom8",btnFontSize:"14px",btnHeight:"5.5vh"},on:{click:t.clickEdit}})],1)]):a("div",{staticClass:"regist-edit"},[a("div",{staticClass:"img-div"},[a("img",{attrs:{src:t.form.schoolLogo,alt:""}})]),t._v(" "),a("div",{staticClass:"title"},[t._v(t._s(t.form.schoolName))]),t._v(" "),a("div",{staticClass:"edit"},[a("ul",[a("li",[a("div",{staticClass:"name"},[t._v("学校学制")]),t._v(" "),a("div",{staticClass:"content"},[a("span",[t._v(t._s(t.records.schooling))])])]),t._v(" "),a("li",[a("div",{staticClass:"name"},[t._v("班级格式")]),t._v(" "),a("div",{staticClass:"content"},[a("span",[t._v(t._s(t.records.shifts))])])])])])])])]),t._v(" "),t.startEdit?a("div",{staticClass:"start-edit"},[a("div",{staticClass:"m-top"},[a("span",[t._v("学校档案")]),t._v(" "),a("div",{staticClass:"t-right"},[a("Button",{attrs:{title:"保存",btnClass:"custom8",btnFontSize:"14px",btnHeight:"4.5vh"},on:{click:function(o){return t.saveRecord("form")}}}),t._v(" "),a("Button",{attrs:{title:"取消",btnClass:"custom7",btnFontSize:"14px",btnHeight:"4.5vh"},on:{click:t.cancelRecord}})],1)]),t._v(" "),a("div",{staticClass:"m-bom"},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:""}},[a("div",{staticClass:"upfile-img",attrs:{title:"支持jpg，jpeg，png，文件小于10M"},on:{click:t.fileClick}},[""==t.form.schoolLogo?a("span",[t._v("校徽")]):a("img",{staticClass:"load-img",attrs:{src:t.form.schoolLogo,alt:""}}),t._v(" "),a("div",{staticClass:"hover-img"},[a("img",{attrs:{src:e("tzVE"),alt:""}})]),t._v(" "),a("input",{attrs:{type:"file",id:"upfile"},on:{change:function(o){return t.fileChange(o)}}})])]),t._v(" "),a("el-form-item",{attrs:{label:"学校名称：",prop:"schoolName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:t.form.schoolName,callback:function(o){t.$set(t.form,"schoolName",o)},expression:"form.schoolName"}}),t._v(" "),a("span",[t._v("注册名称不可修改")])],1),t._v(" "),a("el-form-item",{attrs:{label:"学校学制：",prop:"schoolSystem"}},[a("el-input",{staticStyle:{display:"none"},attrs:{value:t.allSystem||t.form.schoolSystem},model:{value:t.form.schoolSystem,callback:function(o){t.$set(t.form,"schoolSystem",o)},expression:"form.schoolSystem"}}),t._v(" "),a("span",{staticClass:"system-content"},[t._v(t._s(t.allSystem))]),t._v(" "),a("Button",{attrs:{title:"选择学制",btnClass:"custom8",btnFontSize:"12px",btnHeight:"3.5vh",dised:t.sysBtnDisable},on:{click:t.selSchoolSys}})],1),t._v(" "),a("el-form-item",{attrs:{label:"年级名称格式：",prop:"gradeFormat"}},[a("el-radio-group",{attrs:{disabled:t.gradeDisable},on:{change:t.radioGroup},model:{value:t.form.gradeFormat,callback:function(o){t.$set(t.form,"gradeFormat",o)},expression:"form.gradeFormat"}},[a("el-radio",{attrs:{label:"1"}},[t._v("按照入学年份。")]),t._v(" "),a("span",{staticClass:"sel-year"},[t._v("选择最晚入学年份")]),t._v(" "),a("el-date-picker",{staticStyle:{width:"120px"},attrs:{type:"year",placeholder:"",editable:!1,disabled:"1"!=t.form.gradeFormat||t.yearDisable},on:{change:t.changeYear},model:{value:t.selYear,callback:function(o){t.selYear=o},expression:"selYear"}}),t._v(" "),a("span",{staticClass:"group-span"},[t._v(t._s(""+t.selYears))]),t._v(" "),a("el-radio",{attrs:{label:"2"}},[t._v("按照高一 高二 高三；初一初二初三；一年级 二年级 三年级")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"班级名称格式：",prop:"classFormat"}},[a("el-radio-group",{attrs:{disabled:t.classDisable},model:{value:t.form.classFormat,callback:function(o){t.$set(t.form,"classFormat",o)},expression:"form.classFormat"}},[a("el-radio",{attrs:{label:"1"}},[t._v("一班，二班，三班")]),t._v(" "),a("el-radio",{attrs:{label:"2"}},[t._v("1班，2班，3班")]),t._v(" "),a("el-radio",{attrs:{label:"3"}},[t._v("（1）班，（2）班，（3）班")])],1)],1)],1)],1),t._v(" "),a("el-dialog",{staticClass:"sch-system-dialog",attrs:{title:"选择学制",visible:t.schSystemDialog,width:"650px",center:""},on:{"update:visible":function(o){t.schSystemDialog=o}}},[a("div",{staticClass:"content"},[a("el-form",{attrs:{inline:!0,model:t.systemForm}},[a("el-form-item",{attrs:{label:""}},[a("el-checkbox",{attrs:{label:"1",disabled:t.groupDisable1},model:{value:t.systemForm.systemSchool,callback:function(o){t.$set(t.systemForm,"systemSchool",o)},expression:"systemForm.systemSchool"}},[t._v("小学")]),t._v(" "),a("el-radio-group",{attrs:{disabled:t.groupDisable1},model:{value:t.systemForm.smaSch,callback:function(o){t.$set(t.systemForm,"smaSch",o)},expression:"systemForm.smaSch"}},[a("el-radio",{attrs:{label:"5",disabled:-1==t.systemForm.systemSchool.indexOf("1")}},[t._v("五年制")]),t._v(" "),a("el-radio",{attrs:{label:"6",disabled:-1==t.systemForm.systemSchool.indexOf("1")}},[t._v("六年制")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-checkbox",{attrs:{label:"2",disabled:t.groupDisable2},model:{value:t.systemForm.systemSchool,callback:function(o){t.$set(t.systemForm,"systemSchool",o)},expression:"systemForm.systemSchool"}},[t._v("初中")]),t._v(" "),a("el-radio-group",{attrs:{disabled:t.groupDisable2},model:{value:t.systemForm.midSch,callback:function(o){t.$set(t.systemForm,"midSch",o)},expression:"systemForm.midSch"}},[a("el-radio",{attrs:{label:"3",disabled:-1==t.systemForm.systemSchool.indexOf("2")}},[t._v("三年制")]),t._v(" "),a("el-radio",{attrs:{label:"4",disabled:-1==t.systemForm.systemSchool.indexOf("2")}},[t._v("四年制")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-checkbox",{attrs:{label:"3",disabled:t.groupDisable3},model:{value:t.systemForm.systemSchool,callback:function(o){t.$set(t.systemForm,"systemSchool",o)},expression:"systemForm.systemSchool"}},[t._v("高中")]),t._v(" "),a("el-radio-group",{attrs:{disabled:t.groupDisable3},model:{value:t.systemForm.hightSch,callback:function(o){t.$set(t.systemForm,"hightSch",o)},expression:"systemForm.hightSch"}},[a("el-radio",{attrs:{label:"3",disabled:-1==t.systemForm.systemSchool.indexOf("3")}},[t._v("三年制")])],1)],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("span",[t._v("注：学制的选择和学生组织结构有关，请谨慎勾选。")]),t._v(" "),a("Button",{attrs:{title:"取消",btnClass:"custom7",btnFontSize:"12px",btnHeight:"4.5vh"},on:{click:function(o){t.schSystemDialog=!1}}}),t._v(" "),a("Button",{attrs:{title:"保存",btnClass:"custom8",btnFontSize:"12px",btnHeight:"4.5vh"},on:{click:t.selectSystem}})],1)])],1):t._e(),t._v(" "),t.isToast?a("Toast",{attrs:{"modal-title":t.toast,duration:"1500"},on:{toastCancel:t.hideToast}}):t._e()],1)},F=[],k={render:S,staticRenderFns:F},_=k,w=e("VU/8"),A=s,E=w(x,_,!1,A,"data-v-fcf35792",null);o.default=E.exports},ylcE:function(t,o,e){var a=e("Vs+C");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("a8a79cb0",a,!0,{})}});