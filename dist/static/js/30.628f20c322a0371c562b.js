webpackJsonp([30],{"6IfH":function(e,o,t){var a=t("kxFB");o=e.exports=t("FZ+f")(!1),o.push([e.i,"\n.resource-video[data-v-92888ef0] {\n  width: 100%;\n  height: 100%;\n}\n.resource-video .resource-top[data-v-92888ef0] {\n    min-height: 6vh;\n    height: 6vh;\n    line-height: 6vh;\n    background-color: #fff;\n    overflow: hidden;\n}\n.resource-video .resource-top ul[data-v-92888ef0] {\n      display: inline-block;\n      width: 50%;\n      min-width: 420px;\n}\n.resource-video .resource-top ul li[data-v-92888ef0] {\n        float: left;\n        width: 125px;\n        text-align: center;\n        color: #6C6C6C;\n        font-size: 16px;\n        font-weight: bold;\n        position: relative;\n        cursor: pointer;\n}\n.resource-video .resource-top ul li:nth-last-child(1) img[data-v-92888ef0] {\n          display: none;\n}\n.resource-video .resource-top ul li img[data-v-92888ef0] {\n          position: absolute;\n          top: 0;\n          bottom: 0;\n          right: -10px;\n          margin: auto;\n          height: 20px;\n}\n.resource-video .resource-top ul li span[data-v-92888ef0] {\n          font-weight: normal;\n          font-size: 14px;\n          margin-left: 3px;\n}\n.resource-video .resource-top ul li.active[data-v-92888ef0] {\n          color: #1cab7d;\n}\n.resource-video .resource-top ul li.active span[data-v-92888ef0] {\n            color: #6C6C6C;\n}\n.resource-video .resource-top .search-box[data-v-92888ef0] {\n      width: 360px;\n      height: 6vh;\n      float: right;\n      margin: 0px 20px 6px 20px;\n      position: relative;\n}\n.resource-video .resource-top .search-box .el-input[data-v-92888ef0] {\n        width: 200px;\n        margin-right: 10px;\n}\n.resource-video .resource-top .search-box .el-input i[data-v-92888ef0] {\n          cursor: pointer;\n}\n.resource-video .label-list[data-v-92888ef0] {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    overflow-x: hidden;\n}\n.resource-video .label-list .el-col[data-v-92888ef0] {\n      margin-top: 20px;\n}\n.resource-video .label-list .el-col .inner[data-v-92888ef0] {\n        background-color: #fff;\n        padding: 10px;\n        overflow: hidden;\n}\n.resource-video .label-list .el-col .inner .top[data-v-92888ef0] {\n          position: relative;\n          padding-top: 75%;\n}\n.resource-video .label-list .el-col .inner .top img[data-v-92888ef0] {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n}\n.resource-video .label-list .el-col .inner .top span[data-v-92888ef0] {\n            position: absolute;\n            left: 10px;\n            bottom: 10px;\n            background-color: rgba(0, 0, 0, 0.5);\n            font-size: 12px;\n            color: #fff;\n            padding: 3px 8px;\n}\n.resource-video .label-list .el-col .inner .mid[data-v-92888ef0] {\n          margin-top: 5px;\n          width: 100%;\n          display: -webkit-box;\n          display: -ms-flexbox;\n          display: flex;\n          overflow: hidden;\n}\n.resource-video .label-list .el-col .inner .mid li[data-v-92888ef0] {\n            -webkit-box-flex: 1;\n                -ms-flex: 1;\n                    flex: 1;\n            overflow: hidden;\n            text-align: center;\n}\n.resource-video .label-list .el-col .inner .mid li[data-v-92888ef0]:nth-of-type(2) {\n              margin: 0 4px;\n}\n.resource-video .label-list .el-col .inner .mid li img[data-v-92888ef0] {\n              width: 100%;\n}\n.resource-video .label-list .el-col .inner h5[data-v-92888ef0] {\n          font-size: 14px;\n          line-height: 35px;\n}\n.resource-video .label-list .el-col .inner h5 i[data-v-92888ef0] {\n            float: right;\n            color: #A0A0A0;\n            font-size: 25px;\n}\n.resource-video .label-list .el-col .inner p[data-v-92888ef0] {\n          font-size: 12px;\n          line-height: 14px;\n          margin-bottom: 8px;\n}\n.resource-video .label-list .el-col .inner[data-v-92888ef0] .el-checkbox__inner {\n          border-radius: 50% !important;\n}\n.resource-video .label-list .el-col .inner[data-v-92888ef0] .el-checkbox__label {\n          color: #333 !important;\n}\n.resource-video .label-list .el-col .inner[data-v-92888ef0] .el-checkbox {\n          height: 30px;\n          line-height: 30px;\n}\n.resource-video .label-list .el-col .inner[data-v-92888ef0] .el-checkbox .el-checkbox__inner {\n            border-radius: 50% !important;\n}\n.resource-video .label-list .el-col .inner[data-v-92888ef0] .el-checkbox .el-checkbox__label {\n            color: #333 !important;\n}\n.resource-video .label-list .el-col .inner[data-v-92888ef0] .el-checkbox .is-checked .el-checkbox__inner {\n            background-color: #1cab7d;\n            border-color: #1cab7d;\n            color: #fff;\n}\n.resource-video .label-list .el-col .inner[data-v-92888ef0] .el-checkbox .is-checked .el-checkbox__inner::after {\n              border-color: #fff;\n}\n.resource-video .label-list .el-col .inner .button-div[data-v-92888ef0] {\n          height: 20px;\n          float: right;\n          background: #F2F2F2;\n}\n.resource-video .label-list .el-col .inner .button-div > div[data-v-92888ef0] {\n            height: 20px;\n}\n.resource-video .edit-dialog[data-v-92888ef0] .el-dialog {\n    margin-top: 15vh !important;\n}\n.resource-video .edit-dialog[data-v-92888ef0] .el-dialog .el-select__input {\n      display: inline !important;\n      border: none !important;\n}\n.resource-video .edit-dialog[data-v-92888ef0] .el-dialog .el-dialog__body {\n      padding-bottom: 0 !important;\n}\n.resource-video .edit-dialog[data-v-92888ef0] .el-dialog .el-form {\n      text-align: left;\n}\n.resource-video .edit-dialog[data-v-92888ef0] .el-dialog .el-form .el-form-item {\n        padding-bottom: 0 !important;\n}\n.resource-video .edit-dialog[data-v-92888ef0] .el-dialog .el-form /deep/ .el-checkbox__inner {\n        border-radius: 50% !important;\n}\n.resource-video .edit-dialog[data-v-92888ef0] .el-dialog .el-form /deep/ .el-checkbox__label {\n        color: #333 !important;\n}\n.resource-video .edit-dialog[data-v-92888ef0] .el-dialog .el-dialog__footer .dialog-footer {\n      margin: 0 auto;\n      display: block;\n      padding-right: 10px;\n      text-align: right;\n      overflow: hidden;\n}\n.resource-video .edit-dialog[data-v-92888ef0] .el-dialog .el-dialog__footer .dialog-footer .del-resource {\n        display: inline-block;\n        cursor: pointer;\n        line-height: 40px;\n        float: left;\n}\n.resource-video .edit-dialog[data-v-92888ef0] .el-dialog .el-dialog__footer .dialog-footer .del-resource i {\n          color: #B6B6B6;\n          font-size: 20px;\n          margin-left: 10px;\n}\n.resource-video .edit-dialog[data-v-92888ef0] .el-dialog .el-dialog__footer .dialog-footer .del-resource span {\n          font-size: 16px;\n}\n.resource-video .edit-dialog[data-v-92888ef0] .el-dialog .el-dialog__footer .dialog-footer .button-div {\n        width: 100px;\n        margin-left: 20px;\n        margin-right: 0 !important;\n}\n.resource-video .edit-dialog[data-v-92888ef0] .el-dialog .el-dialog__footer .add-foot {\n      text-align: center;\n}\n.resource-video .edit-dialog[data-v-92888ef0] .el-dialog .el-dialog__footer .add-foot .button-div {\n        float: none;\n        width: 100px;\n        margin-left: 20px;\n        margin-right: 0 !important;\n}\n.resource-video .template-dialog[data-v-92888ef0] .el-dialog .el-dialog__body {\n    text-align: center;\n    border: 0 !important;\n}\n.resource-video .template-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .swiper-container {\n      width: 100%;\n      height: 370px;\n}\n.resource-video .template-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .swiper-container .swiper-wrapper .swiper-slide {\n        width: 80%;\n        overflow: hidden;\n        text-align: center;\n}\n.resource-video .template-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .swiper-container .swiper-button-next {\n        width: 40px;\n        height: 60px;\n        top: 35%;\n        background: url("+a(t("3aVt"))+") no-repeat center;\n        background-size: 100%;\n}\n.resource-video .template-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .swiper-container .swiper-button-prev {\n        width: 40px;\n        height: 60px;\n        top: 35%;\n        background: url("+a(t("3aVt"))+") no-repeat center;\n        background-size: 100%;\n        -webkit-transform: rotate(-180deg);\n        transform: rotate(-180deg);\n}\n.resource-video .template-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .swiper-container .swiper-button-disabled {\n        background: url("+a(t("ajlA"))+") no-repeat center;\n        background-size: 100%;\n        opacity: 1;\n}\n.resource-video .template-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .swiper-container.gallery-top {\n        height: 80%;\n}\n.resource-video .template-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .swiper-container.gallery-top .swiper-slide img {\n          width: 100%;\n          height: 550px;\n}\n.resource-video .template-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .swiper-container.gallery-thumbs {\n        height: 20%;\n        -webkit-box-sizing: border-box;\n                box-sizing: border-box;\n        padding: 10px 0;\n}\n.resource-video .template-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .swiper-container.gallery-thumbs .swiper-slide {\n        width: 20%;\n        opacity: 0.4;\n}\n.resource-video .template-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .swiper-container.gallery-thumbs .swiper-slide img {\n          height: 90px;\n}\n.resource-video .template-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .swiper-container.gallery-thumbs .swiper-slide-thumb-active {\n        opacity: 1;\n}\n.resource-video .template-dialog[data-v-92888ef0] .el-dialog .el-dialog__body h5 {\n      font-size: 16px;\n      line-height: 30px;\n      color: #000;\n}\n.resource-video .template-dialog[data-v-92888ef0] .el-dialog .el-dialog__body p {\n      font-size: 12px;\n      line-height: 16px;\n      margin-bottom: 20px;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-dialog {\n    /*margin-top: 8vh!important;*/\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-dialog .el-dialog__body {\n      padding: 15px 25px 10px !important;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-dialog .checked-box .el-checkbox {\n      margin-left: 100px;\n      margin-top: 10px;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-dialog .checked-box .el-checkbox .el-checkbox__inner {\n        border-radius: 50% !important;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-dialog .checked-box .el-checkbox .el-checkbox__label {\n        color: #333 !important;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-dialog .checked-box .el-checkbox:nth-of-type(1) {\n        margin-left: 378px;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-form-item {\n    width: 100%;\n    text-align: left;\n    position: relative;\n    padding-left: 2%;\n    padding-right: 3%;\n    margin-bottom: 0 !important;\n    padding-bottom: 20px !important;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-form-item /deep/ .el-radio-group .el-radio {\n      display: inline-block;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-form-item .search-box {\n      width: 240px;\n      height: 36px;\n      float: right;\n      margin: 0px 0px 6px 20px;\n      position: relative;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-form-item .search-box .el-input i {\n        cursor: pointer;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-form-item dd {\n      position: absolute;\n      left: 0;\n      bottom: -30px;\n      color: red;\n      font-size: 12px;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-form-item .el-table {\n      width: 800px;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-form-item:nth-of-type(2) > label, .resource-video .sch-system-dialog[data-v-92888ef0] .el-form-item:nth-of-type(3) > label {\n      text-align: right;\n      line-height: 40px;\n      float: left;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-form-item:nth-of-type(2) > label:before, .resource-video .sch-system-dialog[data-v-92888ef0] .el-form-item:nth-of-type(3) > label:before {\n        content: '*';\n        color: #f56c6c;\n        margin-right: 4px;\n        display: inline-block;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-radio-group {\n    line-height: 40px;\n    position: relative;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-radio-group .el-radio {\n      display: inline-block;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-dialog__footer .dialog-footer {\n    margin: 0 auto;\n    text-align: center;\n}\n.resource-video .sch-system-dialog[data-v-92888ef0] .el-dialog__footer .dialog-footer .button-div {\n      clear: both;\n      float: none;\n      margin-right: 20px;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog {\n    margin-top: 15vh !important;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body {\n      padding-bottom: 0;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .el-form {\n        text-align: left;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .el-form .el-form-item {\n          padding-bottom: 0 !important;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .el-form .el-form-item__error {\n          padding-top: 0;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .el-form .el-checkbox {\n          height: 30px;\n          line-height: 30px;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .el-form .el-checkbox .el-checkbox__inner {\n            border-radius: 50% !important;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .el-form .el-checkbox .el-checkbox__label {\n            color: #333 !important;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .el-form .button-div {\n          width: 100px;\n          margin-left: 10px;\n          margin-right: 0 !important;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .upload-box {\n        margin: 0 auto;\n        width: 470px;\n        margin-top: 2px;\n        margin-bottom: 20px;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .upload-box .el-upload {\n          width: 100%;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .upload-box .el-upload .el-upload-dragger {\n            width: 100%;\n            height: 180px;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .upload-box .el-upload .el-upload-dragger:hover {\n              border-color: #1cab7d;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .upload-box .el-upload .el-upload-dragger:focus {\n              outline: none;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .upload-box .el-upload .el-upload-dragger .button-div {\n              margin-top: 45px;\n              margin-bottom: 20px;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .upload-box .el-upload-list {\n          text-align: left;\n          max-height: 160px;\n          overflow: auto;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .upload-box .el-upload-list li {\n            height: auto;\n            outline: none;\n            border-color: #e1e1e1;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .upload-box .el-upload-list li img {\n              width: 20px;\n              height: 20px;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .upload-box .el-upload-list li a {\n              margin-top: 0;\n              line-height: 20px;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .upload-box .el-upload-list li a:hover {\n                color: #1cab7d;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog .el-dialog__body .upload-box .el-upload-list li a i {\n                display: none;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog /deep/ .el-dialog__footer .dialog-footer {\n      margin: 0 auto;\n      display: block;\n      padding-right: 10px;\n      text-align: left;\n      overflow: hidden;\n      text-align: center;\n}\n.resource-video .upload-dialog[data-v-92888ef0] .el-dialog /deep/ .el-dialog__footer .dialog-footer .button-div {\n        width: 100px;\n        margin-left: 20px;\n        margin-right: 0 !important;\n}\n.resource-video .upload-success[data-v-92888ef0] .el-dialog {\n    margin-top: 35vh !important;\n}\n.resource-video .upload-success[data-v-92888ef0] .el-dialog .el-dialog__header {\n      padding: 30px 20px 20px;\n}\n.resource-video .upload-success[data-v-92888ef0] .el-dialog .el-dialog__header .el-dialog__title {\n        font-size: 30px;\n        font-weight: normal;\n}\n.resource-video .upload-success[data-v-92888ef0] .el-dialog .el-dialog__body {\n      padding: 15px 25px 10px !important;\n      border: 0;\n      text-align: center;\n}\n.resource-video .upload-success[data-v-92888ef0] .el-dialog .el-dialog__body .button-div {\n        clear: both;\n        float: none;\n        margin-left: 20px;\n}\n.resource-video .upload-success[data-v-92888ef0] .el-dialog .el-dialog__body .button-div:nth-of-type(1) {\n          margin-left: 0;\n}\n.resource-video .upload-success[data-v-92888ef0] .el-dialog .el-dialog__body .el-checkbox {\n        margin-top: 20px;\n}\n.resource-video .upload-success[data-v-92888ef0] .el-dialog .el-dialog__body .el-checkbox:nth-of-type(1) {\n          margin-right: 40px;\n}\n.resource-video .upload-success[data-v-92888ef0] .el-dialog .el-dialog__body .el-checkbox .el-checkbox__inner {\n          border-radius: 50% !important;\n}\n.resource-video .upload-success[data-v-92888ef0] .el-dialog .el-dialog__body .el-checkbox .el-checkbox__label {\n          color: #333 !important;\n}\n",""])},uCyb:function(e,o,t){var a=t("6IfH");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("0add09ac",a,!0,{})},xm9b:function(e,o,t){"use strict";function a(e){t("uCyb")}Object.defineProperty(o,"__esModule",{value:!0});var l=t("mvHQ"),i=t.n(l),n=t("bWJ8"),s=t("T0Gs"),r=t("qqG0"),d=t("DNVT"),c={name:"ResourceVideo",components:{Button:n.a,treeTransfer:s.a,Toast:r.a},computed:{defaultErrImg:function(){return'this.src="'+this.$store.state.Common.defaultErrImg+'"'}},data:function(){return{defArrow:this.$store.state.Common.defaultLineArrow,isToast:!1,toast:"",swiperSpeed:5e3,useTemplateData:[{templateName:"德育模板模型",imgUrl:t("4GDJ")},{templateName:"德育模板模型",imgUrl:t("4GDJ")},{templateName:"综合模板模型",imgUrl:t("4GDJ")},{templateName:"功能性模板模型",imgUrl:t("4GDJ")},{templateName:"德育模板1模型",imgUrl:t("4GDJ")},{templateName:"德育模板1模型",imgUrl:t("4GDJ")}],templateDetailDialog:!1,choosePlaceDialog:!1,listClassroom:[],fromData:[{id:1e3,pid:101,label:"烟台一中",group:102,disabled:0,children:[{id:1e4,pid:1e3,label:"校门口",disabled:0,group:103,children:[{id:10010,pid:1e4,label:"101",disabled:0,group:104,children:[]},{id:10011,pid:1e4,label:"102",disabled:0,group:104,children:[]},{id:10012,pid:1e4,label:"103",disabled:0,group:104,children:[]}]},{id:10001,pid:1e3,label:"传达室",disabled:0,group:103,children:[{id:10020,pid:10001,label:"201",disabled:0,group:104,children:[]},{id:10021,pid:10001,label:"202",disabled:0,group:104,children:[]},{id:10022,pid:10001,label:"203",disabled:0,group:104,children:[]}]}]}],navData:[{title:"图片",value:0,count:""},{title:"视频",value:1,count:""},{title:"文档",value:2,count:""}],searchVal:"",btn1Data:{iconL:t("vYV2"),iconLAct:t("vYV2")},labelData:[],checkedResource:{},labelDialog:!1,labelForm:{label_name:"",resourceId:0,is_share:!1},rules:{sourceName:[{required:!0,message:"请输入资源名称",trigger:"blur"}],label_name:[{required:!0,message:"请输入资源库名称",trigger:"blur"}],label_id:[{required:!0,message:"请选择资源库",trigger:"change"}]},uploadDialog:!1,publishSuccessDialog:!1,uploadSuccessDialog:!1,toParent:!1,toCard:!0,uploadForm:{label_id:"",is_share:!1},uploadParams:{token:""},fileList:[],resourceList:[],filesLimit:5,chooseType:0,userLabels:[],uploadSuccessData:[]}},methods:{resizeLayout:function(){setTimeout(function(){var e=$(".index > .m-cen").height(),o=$(".index .set-top").height(),t=$(".resource-video > .resource-top").height(),a=e-o-t;$(".resource-video .label-list").height(a)},50)},navClick:function(e){if(0==e.value)this.$router.push("/ResourcePic");else{if(1==e.value)return;2==e.value&&this.$router.push("/ResourceWord")}},search:function(){},uploadClick:function(){var e=this;this.uploadDialog=!0,this.resourceList=[],this.uploadSuccessData=[],this.uploadForm={label_id:"",is_share:!0},setTimeout(function(){e.$refs.uploadForm.resetFields()},20),this.getUserLabels(),this.$api.Common.getQiniuUploadToken({isOverride:1,expireSeconds:3600}).then(function(o){600==o.data.code||0==o.data.code?e.uploadParams.token=o.data.data:(e.isToast=!0,e.toast=o.data.msg)})},saveLabels:function(){var e=this;this.$refs.labelForm.validate(function(o){if(!o)return e.$message({message:"请输入内容（*为必填项）",type:"error",duration:e.msgDuration}),!1;var t={label_name:e.labelForm.label_name,is_share:e.labelForm.is_share?1:0,resource_type:2,school_id:localStorage.getItem("schoolId")},a="";0==e.chooseType?(a="post",t.user_id=localStorage.getItem("userId")):1==e.chooseType&&(a="put",t.id=e.labelForm.id,t.user_id=localStorage.getItem("userId")),e.$api.Rules.modifyLabel(a,t).then(function(o){600==o.data.code||0==o.data.code?(e.labelDialog=!1,0==e.chooseType&&(e.uploadForm.label_id=o.data.data.id,e.uploadForm.is_share=1==o.data.data.is_share),e.getUserLabels(),e.getResourcesLabels()):(e.isToast=!0,e.toast=o.data.msg)})})},beforeUpload:function(e){return-1==["video/mp4","video/ogg","video/flv","video/avi","video/wmv","video/rmvb","video/mpeg"].indexOf(e.type)?(this.$message({showClose:!0,type:"warning",message:"请上传正确的视频格式!",duration:this.msgDuration}),!1):e.size/1024/1024<100?void 0:(this.$message({showClose:!0,type:"warning",message:"上传视频大小不能超过 100MB!",duration:this.msgDuration}),!1)},changeUpload:function(e,o){},uploadSuccess:function(e,o,t){this.resourceList=t},uploadError:function(e,o,t){},handleRemove:function(e,o){this.resourceList=o},handleExceed:function(e,o){this.$message({showClose:!0,type:"warning",message:"上传文件不能超过"+filesLimit+"个！",duration:this.msgDuration})},changeShare:function(e){var o=this;setTimeout(function(){o.$refs.uploadForm.clearValidate(["label_id"])})},saveUpload:function(){var e=this;if(0==this.resourceList.length)return void this.$message({showClose:!0,type:"warning",message:"请选择要上传的资源！",duration:this.msgDuration});this.$refs.uploadForm.validate(function(o){if(!o)return e.$message({message:"请输入内容（*为必填项）",type:"error",duration:e.msgDuration}),!1;var t=e.resourceList.map(function(e){return{resource_name:e.name,cdn_name:e.response.key}}),a={resource_type:2,from:"web",label_id:e.uploadForm.label_id,is_share:e.uploadForm.is_share?1:0,resources:t,school_id:localStorage.getItem("schoolId")};e.$api.Rules.addResource("post",a).then(function(o){e.$loading().close(),600==o.data.code||0==o.data.code?(e.toParent=!1,e.toCard=!0,e.uploadSuccessData=o.data.data,e.getResourcesLabels(),e.$refs.upload.clearFiles(),e.uploadDialog=!1,e.uploadSuccessDialog=!0):(e.isToast=!0,e.toast=o.data.msg)}).catch(function(o){e.$loading().close()})})},showTemplateDetail:function(e){this.templateDetailDialog=!0;setTimeout(function(){var e=new d.a(".template-dialog .gallery-thumbs",{spaceBetween:10,slidesPerView:6,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0});new d.a(".template-dialog .gallery-top",{spaceBetween:10,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:e}})},0)},useTemplate:function(){this.choosePlaceDialog=!0},getSelected:function(e){for(var o=0;o<e.length;o++)this.listClassroom.push({classId:e[o].pid,placeName:e[o].pname,studentId:e[o].id,id:e[o].id,buildingName:e[o].label});var t=this.listClassroom.length;if(1!=t)for(var a=0;a<t;a++)for(var l=a+1;l<t;l++)this.listClassroom[l].id==this.listClassroom[a].id&&(this.listClassroom.splice(l,1),t--,l--)},checkedClick:function(e){this.listClassroom.push({classId:e.pid,placeName:e.pname,studentId:e.id,id:e.id,buildingName:e.value});var o=this.listClassroom.length;if(1!=o)for(var t=0;t<o;t++)for(var a=t+1;a<o;a++)this.listClassroom[a].id==this.listClassroom[t].id&&(this.listClassroom.splice(a,1),o--,a--)},ViewDetail:function(e){this.checkedResource=e;var o={label_id:e.id,is_share:e.is_share,other_share:e.other_share,label_name:e.label_name,creatName:e.user_id};this.$router.push({path:"/VideoListDetail",query:o})},changeLabels:function(e){var o=this;this.labelDialog=!0,setTimeout(function(){o.$refs.labelForm.resetFields(),e?(o.chooseType=1,o.checkedResource=e,o.labelForm=JSON.parse(i()(e)),o.labelForm.is_share=1==e.is_share):(o.chooseType=0,o.labelForm={label_name:"",is_share:!1})},20)},delResource:function(){var e=this;this.$confirm("这个资源库内所有视频都将被删除！同时删除班牌正在使用的资源！确定删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var o={id:e.labelForm.id,user_id:localStorage.getItem("userId"),school_id:localStorage.getItem("schoolId")};e.$api.Rules.delLabel(o).then(function(o){600==o.data.code||0==o.data.code?(e.labelDialog=!1,e.checkedResource={},e.$message({showClose:!0,type:"success",message:"删除成功!",duration:e.msgDuration}),e.getResourcesLabels()):(e.isToast=!0,e.toast=o.data.msg)})}).catch(function(){})},getResourcesLabels:function(){var e=this;this.$loading();var o={resource_type:2,user_id:localStorage.getItem("userId"),school_id:localStorage.getItem("schoolId")};this.$api.Rules.getResourcesLabels("get",o).then(function(o){e.$loading().close(),600==o.data.code||0==o.data.code?(o.data.data.rows.forEach(function(e){e.is_share=1==e.is_share}),e.labelData=o.data.data.rows):(e.isToast=!0,e.toast=o.data.msg)}).catch(function(o){e.$loading().close()})},getLabelCount:function(){var e=this,o={user_id:localStorage.getItem("userId"),school_id:localStorage.getItem("schoolId")};this.$api.Rules.getLabelCount("get",o).then(function(o){600==o.data.code||0==o.data.code?e.navData.forEach(function(e){"图片"==e.title?e.count=o.data.data.picture_count:"视频"==e.title?e.count=o.data.data.video_count:"文档"==e.title&&(e.count=o.data.data.word_count)}):(e.isToast=!0,e.toast=o.data.msg)})},getUserLabels:function(){var e=this,o={resource_type:2,user_id:localStorage.getItem("userId"),school_id:localStorage.getItem("schoolId")};this.$api.Rules.getUserLabels("get",o).then(function(o){600==o.data.code||0==o.data.code?e.userLabels=o.data.data.rows:(e.isToast=!0,e.toast=o.data.msg)})},publishResource:function(){var e=this,o=this.uploadSuccessData.map(function(e){return e.id}),t={school_id:localStorage.getItem("schoolId"),resource_id:o.join(","),resource_type:2,class_id:"100483",is_show_parent:this.toParent?1:0,is_show_device:this.toCard?1:0,user_id:localStorage.getItem("userId")};this.$loading(),this.$api.Rules.publishResource("post",t).then(function(o){e.$loading().close(),600==o.data.code||0==o.data.code?(e.uploadSuccessDialog=!1,e.choosePlaceDialog=!1,e.$message({showClose:!0,type:"success",message:"发布成功!",duration:e.msgDuration})):(e.isToast=!0,e.toast=o.data.msg)}).catch(function(o){e.$loading().close()})}},mounted:function(){this.roleActions=this.$store.state.Common.roleActions,this.resizeLayout();var e=this;new d.a(".template-top .swiper-container",{autoplay:{delay:e.swiperSpeed,disableOnInteraction:!1},slidesPerView:e.useTemplateData.length<3?e.useTemplateData.length:3})},created:function(){this.getResourcesLabels(),this.getLabelCount()}},u=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"resource-video"},[t("div",{staticClass:"resource-top"},[t("ul",e._l(e.navData,function(o,a){return t("li",{key:a,staticClass:"clearfix",class:{active:1==o.value},on:{click:function(t){return e.navClick(o)}}},[e._v("\n\t\t\t\t\t"+e._s(o.title)),t("span",{directives:[{name:"show",rawName:"v-show",value:""!=o.count,expression:"item.count!=''"}]},[e._v("("+e._s(o.count)+")")]),e._v(" "),t("img",{attrs:{src:e.defArrow}})])}),0),e._v(" "),t("div",{staticClass:"search-box"},[t("el-input",{attrs:{size:"small",placeholder:"请输入资源库名称"},on:{change:e.search},model:{value:e.searchVal,callback:function(o){e.searchVal=o},expression:"searchVal"}},[t("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.search},slot:"suffix"})]),e._v(" "),t("Button",{attrs:{btnClass:"custom8",iconLeft:!0,data:e.btn1Data,btnFontSize:"12px",title:"上传视频"},on:{click:e.uploadClick}})],1)]),e._v(" "),t("el-main",{staticClass:"label-list"},[t("el-row",{attrs:{gutter:20}},e._l(e.labelData,function(o,a){return t("el-col",{key:a,attrs:{xs:12,sm:8,md:6,lg:4,xl:4}},[t("div",{staticClass:"inner",staticStyle:{cursor:"pointer"}},[t("div",{on:{click:function(t){return e.ViewDetail(o)}}},[t("div",{staticClass:"top"},[t("img",{attrs:{src:o.videos.length>0?e.uploadPicUrl+o.videos[0].cdn_name+"?vframe/jpg/offset/0/w/246/h184":"",onerror:e.defaultErrImg}}),e._v(" "),o.videos.length>0?t("span",[e._v(e._s(o.videos.length))]):e._e()]),e._v(" "),t("h5",[e._v("\n\t\t\t\t\t\t\t\t"+e._s(o.label_name)+"\n\t\t\t\t\t\t\t\t"),t("i",{staticClass:"iconfont icon-shipin3"})])]),e._v(" "),t("p",[e._v(e._s(o.creatName))]),e._v(" "),0==o.is_system&&0==o.other_share?t("el-checkbox",{attrs:{disabled:""},model:{value:o.is_share,callback:function(t){e.$set(o,"is_share",t)},expression:"item.is_share"}},[e._v("共享")]):e._e(),e._v(" "),0==o.is_system&&0==o.other_share?t("Button",{attrs:{btnClass:"custom6",btnWidth:"60%",btnHeight:"30px",btnFontSize:"12px",title:"编辑"},on:{click:function(t){return e.changeLabels(o)}}}):e._e(),e._v(" "),1==o.is_system?t("Button",{attrs:{btnClass:"custom6 is-system",btnWidth:"100%",btnHeight:"30px",btnFontSize:"12px",title:"平台提供资源"},on:{click:function(e){}}}):e._e(),e._v(" "),1==o.other_share?t("Button",{attrs:{btnClass:"custom6 is-system",btnWidth:"100%",btnHeight:"30px",btnFontSize:"12px",title:"他人共享资源"},on:{click:function(e){}}}):e._e()],1)])}),1)],1),e._v(" "),t("el-dialog",{staticClass:"edit-dialog",attrs:{title:0==e.chooseType?"新建资源库":"编辑资源库",visible:e.labelDialog,width:0==e.chooseType?"500px":"650px",center:""},on:{"update:visible":function(o){e.labelDialog=o}}},[t("div",{staticClass:"content"},[t("el-form",{ref:"labelForm",attrs:{"label-width":"100px",rules:e.rules,model:e.labelForm}},[t("el-form-item",{attrs:{label:"资源库名称：",prop:"label_name"}},[t("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"请输入资源库名称",clearable:""},model:{value:e.labelForm.label_name,callback:function(o){e.$set(e.labelForm,"label_name",o)},expression:"labelForm.label_name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"资源库共享："}},[t("el-checkbox",{model:{value:e.labelForm.is_share,callback:function(o){e.$set(e.labelForm,"is_share",o)},expression:"labelForm.is_share"}},[e._v("共享")])],1)],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",class:{"add-foot":0==e.chooseType},attrs:{slot:"footer"},slot:"footer"},[1==e.chooseType?t("div",{staticClass:"del-resource",on:{click:e.delResource}},[t("i",{staticClass:"iconfont icon-shanchu1"}),e._v(" "),t("span",[e._v("删除资源库")])]):e._e(),e._v(" "),t("Button",{attrs:{title:"取消",btnClass:"custom7",btnFontSize:"12px",btnHeight:"4.5vh"},on:{click:function(o){e.labelDialog=!1}}}),e._v(" "),t("Button",{attrs:{title:"保存",btnClass:"custom8",btnFontSize:"12px",btnHeight:"4.5vh"},on:{click:e.saveLabels}})],1)]),e._v(" "),t("el-dialog",{staticClass:"sch-system-dialog",attrs:{title:"发布到班牌",visible:e.choosePlaceDialog,width:"900px",center:""},on:{"update:visible":function(o){e.choosePlaceDialog=o}}},[t("div",{staticClass:"content"},[t("div",{staticClass:"transfer-div"},[t("tree-transfer",{attrs:{from_data:e.fromData,leftTitle:"选择场所/教室",leftplaceholder:"请输入场所/教室名称",sourceDiffer:"2",user_data:e.listClassroom},on:{showSelected:e.getSelected,checkedClick:e.checkedClick}}),e._v(" "),t("div",{staticClass:"checked-box"},[t("el-checkbox",{model:{value:e.toCard,callback:function(o){e.toCard=o},expression:"toCard"}},[e._v("发布到班牌")]),e._v(" "),t("el-checkbox",{model:{value:e.toParent,callback:function(o){e.toParent=o},expression:"toParent"}},[e._v("分享到家长端")])],1)],1)]),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{title:"取消",btnClass:"custom7",btnFontSize:"12px",btnHeight:"40px"},on:{click:function(o){e.choosePlaceDialog=!1}}}),e._v(" "),t("Button",{attrs:{title:"保存",btnClass:"custom8",btnFontSize:"12px",btnHeight:"40px"},on:{click:e.publishResource}})],1)]),e._v(" "),t("el-dialog",{staticClass:"upload-dialog",attrs:{title:"上传视频",visible:e.uploadDialog,width:"650px",center:""},on:{"update:visible":function(o){e.uploadDialog=o}}},[t("div",{staticClass:"content"},[t("el-form",{ref:"uploadForm",attrs:{"label-width":"100px",rules:e.rules,model:e.uploadForm}},[t("el-form-item",{attrs:{label:"资源库：",prop:"label_id"}},[t("el-select",{attrs:{placeholder:"请选择资源库"},model:{value:e.uploadForm.label_id,callback:function(o){e.$set(e.uploadForm,"label_id",o)},expression:"uploadForm.label_id"}},e._l(e.userLabels,function(e){return t("el-option",{key:e.id,attrs:{label:e.label_name,value:e.id}})}),1),e._v(" "),t("Button",{attrs:{btnClass:"custom11",btnFontSize:"12px",title:"+添加"},on:{click:e.changeLabels}}),e._v(" "),t("br"),e._v(" "),t("el-checkbox",{on:{change:e.changeShare},model:{value:e.uploadForm.is_share,callback:function(o){e.$set(e.uploadForm,"is_share",o)},expression:"uploadForm.is_share"}},[e._v("共享资源库")])],1)],1),e._v(" "),t("el-upload",{ref:"upload",staticClass:"upload-box",attrs:{drag:"","list-type":"picture",action:"https://upload.qiniup.com",data:e.uploadParams,"file-list":e.fileList,"on-change":e.changeUpload,"before-upload":e.beforeUpload,"on-success":e.uploadSuccess,"on-error":e.uploadError,limit:e.filesLimit,"on-exceed":e.handleExceed,"on-remove":e.handleRemove}},[t("Button",{attrs:{btnClass:"custom8",btnFontSize:"12px",title:"立即上传"}}),e._v(" "),t("div",{staticClass:"el-upload__text"},[e._v("点击/拖拽一个或多个文件到这里上传"),t("br"),e._v("支持mp4")])],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("Button",{attrs:{title:"取消",btnClass:"custom7",btnFontSize:"12px",btnHeight:"4.5vh"},on:{click:function(o){e.uploadDialog=!1}}}),e._v(" "),t("Button",{attrs:{title:"保存",btnClass:"custom8",btnFontSize:"12px",btnHeight:"4.5vh"},on:{click:e.saveUpload}})],1)]),e._v(" "),t("el-dialog",{staticClass:"upload-success",attrs:{title:"上传完成",visible:e.uploadSuccessDialog,width:"400px",center:""},on:{"update:visible":function(o){e.uploadSuccessDialog=o}}},[e.roleNos.indexOf("S01")>-1?t("Button",{attrs:{title:"暂不发布",btnClass:"custom7",btnFontSize:"12px",btnHeight:"40px"},on:{click:function(o){e.uploadSuccessDialog=!1}}}):e._e(),e._v(" "),e.roleNos.indexOf("S01")>-1?t("Button",{attrs:{title:"发布视频",btnClass:"custom8",btnFontSize:"12px",btnHeight:"40px"},on:{click:function(o){e.choosePlaceDialog=!0}}}):e._e(),e._v(" "),-1==e.roleNos.indexOf("S01")?t("Button",{attrs:{title:"发布视频",btnClass:"custom8",btnFontSize:"12px",btnHeight:"40px"},on:{click:e.publishResource}}):e._e(),e._v(" "),t("br"),e._v(" "),-1==e.roleNos.indexOf("S01")?t("el-checkbox",{model:{value:e.toCard,callback:function(o){e.toCard=o},expression:"toCard"}},[e._v("发布到班牌")]):e._e(),e._v(" "),-1==e.roleNos.indexOf("S01")?t("el-checkbox",{model:{value:e.toParent,callback:function(o){e.toParent=o},expression:"toParent"}},[e._v("分享到家长端")]):e._e()],1),e._v(" "),t("el-dialog",{staticClass:"upload-success",attrs:{title:"发布完成",visible:e.publishSuccessDialog,width:"400px",center:""},on:{"update:visible":function(o){e.publishSuccessDialog=o}}},[t("Button",{attrs:{title:"暂不发布",btnClass:"custom7",btnFontSize:"12px",btnHeight:"40px"},on:{click:function(o){e.publishSuccessDialog=!1}}}),e._v(" "),t("Button",{attrs:{title:"发布到家长端",btnClass:"custom8",btnFontSize:"12px",btnHeight:"40px"},on:{click:function(o){e.publishSuccessDialog=!1}}})],1)],1)},p=[],g={render:u,staticRenderFns:p},h=g,v=t("VU/8"),b=a,m=v(c,h,!1,b,"data-v-92888ef0",null);o.default=m.exports}});