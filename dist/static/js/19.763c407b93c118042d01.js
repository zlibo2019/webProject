webpackJsonp([19],{OE6V:function(t,e,n){t.exports=n.p+"static/img/offline.1cb1876.png"},OOGd:function(t,e,n){"use strict";function a(t){n("lF9c")}Object.defineProperty(e,"__esModule",{value:!0});var o=n("bWJ8"),i=n("qqG0"),l={name:"HelloWorld",components:{Button:o.a,Toast:i.a},data:function(){return{titleName:"全部",onState:2,onType:0,onRegion:0,zPlaceId:0,placeId:0,deviceStateData:[{title:"全部",value:2},{title:"在线",value:1},{title:"离线",value:0}],deviceTypeData:[{deviceName:"全部"},{deviceName:"考勤机"},{deviceName:"门禁机"},{deviceName:"脱机消费"},{deviceName:"联机消费"},{deviceName:"班牌设备"},{deviceName:"访客机"},{deviceName:"门卫机"}],regionData:[],isToast:!1,toast:"",tableData:[],showIndex:!1,allNum:0,currentPage:1,tableLoading:!1,pageItem:20}},methods:{getRegion:function(){var t=this,e={placeId:this.zPlaceId};this.$api.DeviceControl.getBuildList(e).then(function(e){600==e.data.code||0==e.data.code?(t.initLayout(),t.regionData=e.data.data,t.regionData.unshift({placeId:0,placeName:"全部"})):(t.isToast=!0,t.toast=e.data.msg)})},selectDeviceState:function(t){this.onState=t,0==t?this.titleName="离线":1==t?this.titleName="在线":2==t&&(this.titleName="全部"),this.getDevices()},selectRegion:function(t,e){this.onRegion=t,this.placeId=e.placeId,this.getDevices()},selectDeviceType:function(t,e){this.onType=t,this.getDevices()},columState:function(t,e,n){return 0==n?n="离线":1==n&&(n="在线"),n},columPlace:function(t,e,n){return 0==n?n="":1==n&&(n=""),n},columType:function(t,e,n){return 0==n?n="":1==n&&(n=""),n},getDevices:function(){var t=this;this.tableLoading=!0,this.tableData=[];var e={page_index:this.currentPage,page_size:this.pageItem,online_status:this.onState,place_id:1,dev_type:0,school_id:localStorage.getItem("schoolId")};this.$api.DeviceControl.getDevList("get",e).then(function(e){t.tableLoading=!1,600==e.data.code||0==e.data.code?(t.tableData=e.data.data,t.tableData.forEach(function(e,n){t.$set(e,"indexID",(t.currentPage-1)*t.pageItem+n+1)})):(t.isToast=!0,t.toast=e.data.msg)}).catch(function(e){t.tableLoading=!1})},handleSizeChange:function(t){this.pageItem=t,this.currentPage=1,this.changePage(this.pageItem,this.currentPage)},handleCurrentChange:function(t){this.currentPage=t,this.changePage(this.pageItem,this.currentPage)},hideToast:function(){this.isToast=!1},initLayout:function(){setTimeout(function(){var t=$(".index > .m-cen").height(),e=$(".device-control > .m-top").height(),n=$(".operate-box").height(),a=$(".pagination-box").height(),o=t-e-n-a-15;$(".table-box").height(o)},50)},checkRuleSet:function(t){this.$router.push("/Index"),this.$router.push("/SchoolRecord")},checkCardControl:function(t){var e={source:"DeviceControl",placeName:t.place_name,placeId:"10005"};this.$router.push({path:"/CardMonitor",query:e})}},mounted:function(){this.initLayout()},created:function(){this.getDevices(),this.getRegion()}},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"device-control"},[a("div",{staticClass:"m-top"},[a("div",{staticClass:"turn-box"},[a("span",[t._v("设备状态：")]),t._v(" "),a("div",{staticClass:"state-box"},t._l(t.deviceStateData,function(e){return a("el-button",{key:e.value,class:{on:t.onState==e.value},attrs:{type:"text"},on:{click:function(n){return t.selectDeviceState(e.value)}}},[t._v(t._s(e.title)+"\n                    ")])}),1)]),t._v(" "),a("div",{staticClass:"turn-box"},[a("span",[t._v("设备类型：")]),t._v(" "),a("div",{staticClass:"state-box"},t._l(t.deviceTypeData,function(e,n){return a("el-button",{key:n,class:{on:t.onType==n},attrs:{type:"text"},on:{click:function(a){return t.selectDeviceType(n,e)}}},[t._v(t._s(e.deviceName)+"\n                    ")])}),1)]),t._v(" "),a("div",{staticClass:"turn-box"},[a("span",[t._v("所在区域：")]),t._v(" "),a("div",{staticClass:"state-box"},t._l(t.regionData,function(e,n){return a("el-button",{key:e.placeId,class:{on:t.onRegion==n},attrs:{type:"text"},on:{click:function(a){return t.selectRegion(n,e)}}},[t._v(t._s(e.placeName)+"\n                    ")])}),1)])]),t._v(" "),a("div",{staticClass:"m-bottom"},[a("div",{staticClass:"operate-box"},[t._v("\n                "+t._s(t.titleName)+"设备"),a("span",[t._v("("+t._s(t.tableData.length)+"台)")])]),t._v(" "),a("div",{staticClass:"table-box"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{id:"table",border:"",height:"100%",data:t.tableData,"tooltip-effect":"dark","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"indexID",label:"序号","min-width":"60",align:"center"}}),t._v(" "),t.showIndex?a("el-table-column",{attrs:{prop:"id"}}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"dev_run_status",label:"运行状态","min-width":"100",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.dev_run_status?a("img",{attrs:{src:n("vCSb"),alt:""}}):t._e(),t._v(" "),0==e.row.dev_run_status?a("img",{attrs:{src:n("OE6V"),alt:""}}):t._e(),t._v(" "),1==e.row.dev_run_status?a("span",[t._v("在线")]):t._e(),t._v(" "),0==e.row.dev_run_status?a("span",[t._v("离线")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"dev_name",label:"设备状态","min-width":"100",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"dev_name",label:"设备名称","min-width":"100",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"place_name",label:"所在区域","min-width":"100",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"dev_ip",label:"设备IP",align:"center","min-width":"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"dev_id",label:"设备ID",align:"center","min-width":"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"dev_type",label:"设备类型","min-width":"100",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.dev_type))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"last_online",label:"最后在线时间","min-width":"130",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.dev_run_status?a("span",[t._v("/")]):0==e.row.dev_run_status?a("span",[t._v(t._s(e.row.last_online?e.row.last_online:"/"))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"normal",attrs:{size:"mini",plain:""},on:{click:function(n){return t.checkRuleSet(e.row)}}},[t._v("查看规则设置")]),t._v(" "),a("el-button",{staticClass:"normal",attrs:{size:"mini",plain:""},on:{click:function(n){return t.checkCardControl(e.row)}}},[t._v("查看班牌监控")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination-box"},[a("el-pagination",{attrs:{background:"",layout:" prev, pager, next",total:t.allNum,"page-size":t.pageItem,"current-page":t.currentPage},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleCurrentChange}})],1)]),t._v(" "),t.isToast?a("Toast",{attrs:{"modal-title":t.toast,duration:"1000"},on:{toastCancel:t.hideToast}}):t._e()],1)},c=[],s={render:r,staticRenderFns:c},d=s,p=n("VU/8"),u=a,v=p(l,d,!1,u,"data-v-03e336b6",null);e.default=v.exports},lF9c:function(t,e,n){var a=n("zcX/");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("d4c1a3f8",a,!0,{})},vCSb:function(t,e,n){t.exports=n.p+"static/img/online.0c314fc.png"},"zcX/":function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"\n.device-control[data-v-03e336b6] {\n  width: 100%;\n  height: 100%;\n  margin: 0 auto;\n  background: #E7E8EB;\n}\n.device-control .m-top[data-v-03e336b6] {\n    width: 100%;\n    height: auto;\n    background: #fff;\n    margin-bottom: 15px;\n    padding: 0 35px;\n}\n.device-control .m-top .el-button[data-v-03e336b6] {\n      font-size: 12px;\n}\n.device-control .m-top .turn-box[data-v-03e336b6] {\n      width: 100%;\n      height: auto;\n      min-height: 50px;\n      border-bottom: 1px solid #E1E1E1;\n      /*line-height: 50px;*/\n      font-size: 12px;\n      color: #333;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-orient: horizontal;\n      -webkit-box-direction: normal;\n          -ms-flex-direction: row;\n              flex-direction: row;\n      padding: 10px 0;\n}\n.device-control .m-top .turn-box span[data-v-03e336b6] {\n        margin: 0 10px 0 0;\n        -ms-flex-preferred-size: 70px;\n            flex-basis: 70px;\n        line-height: 30px;\n}\n.device-control .m-top .turn-box .state-box[data-v-03e336b6] {\n        -webkit-box-flex: 1;\n            -ms-flex: 1;\n                flex: 1;\n}\n.device-control .m-top .turn-box .state-box .el-button[data-v-03e336b6] {\n          margin-left: 10px;\n}\n.device-control .m-top .turn-box .state-box button[data-v-03e336b6] {\n          color: #AAAAAA;\n          padding: 0;\n          line-height: 30px;\n}\n.device-control .m-top .turn-box .state-box .on[data-v-03e336b6] {\n          color: #333;\n}\n.device-control .m-top .turn-box .el-date-editor[data-v-03e336b6] {\n        margin: 0 20px;\n}\n.device-control .m-top .turn-box .el-date-editor span[data-v-03e336b6] {\n          margin: 0;\n}\n.device-control .m-top .turn-box .el-select .el-input input[data-v-03e336b6] {\n        height: 40px !important;\n}\n.device-control .m-top .turn-box .el-select .el-input span[data-v-03e336b6] {\n        margin: 0;\n}\n.device-control .m-top .turn-box[data-v-03e336b6]:last-child {\n        border: none;\n}\n.device-control .m-bottom[data-v-03e336b6] {\n    width: 100%;\n    height: auto;\n    background: #fff;\n}\n.device-control .m-bottom .operate-box[data-v-03e336b6] {\n      width: 100%;\n      height: 60px;\n      line-height: 60px;\n      border-bottom: 1px solid #e1e1e1;\n      -webkit-box-sizing: content-box;\n              box-sizing: content-box;\n      padding-left: 35px;\n      font-size: 18px;\n      font-weight: bold;\n}\n.device-control .m-bottom .operate-box span[data-v-03e336b6] {\n        font-size: 14px;\n        padding-left: 15px;\n        font-weight: normal;\n}\n.device-control .m-bottom .table-box td:nth-of-type(2) img[data-v-03e336b6], .device-control .m-bottom .table-box td:nth-of-type(2) span[data-v-03e336b6] {\n      vertical-align: middle;\n}\n.device-control .m-bottom .table-box td:nth-of-type(2) span[data-v-03e336b6] {\n      margin-left: 5px;\n}\n.device-control .m-bottom .pagination-box[data-v-03e336b6] {\n      width: 100%;\n      height: 60px;\n      background: #fff;\n      -webkit-box-sizing: content-box;\n              box-sizing: content-box;\n}\n.device-control .m-bottom .pagination-box .el-pagination[data-v-03e336b6] {\n        padding-top: 15px;\n}\n",""])}});